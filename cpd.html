<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2014-06-01 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Waarp OpenR66 - CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20140601" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://www.waarp.it" id="bannerLeft">
                                                <img src="images/waarp.jpg" alt="Waarp Project" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2014-06-01</span>
                  &nbsp;| <span id="projectVersion">Version: 2.4.28</span>
                      </div>
            <div class="xright">                    <a href="http://www.waarp.it/" class="externalLink" title="Waarp">Waarp</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Waarp OpenR66</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Overview of OpenR66">Overview of OpenR66</a>
            </li>
                  <li class="none">
                          <a href="configuration.html" title="Configuration of OpenR66 Server and Clients">Configuration of OpenR66 Server and Clients</a>
            </li>
                  <li class="none">
                          <a href="sslconfig.html" title="Configuration of OpenR66 SSL keys">Configuration of OpenR66 SSL keys</a>
            </li>
                  <li class="none">
                          <a href="commands.html" title="Commands for OpenR66 Server and Clients">Commands for OpenR66 Server and Clients</a>
            </li>
                  <li class="none">
                          <a href="protocol.html" title="Protocol for OpenR66 File Transfer">Protocol for OpenR66 File Transfer</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                  <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                                    <li class="expanded">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                    <ul>
                      <li class="none">
                          <a href="xref-test/index.html" title="Test Source Xref">Test Source Xref</a>
            </li>
                      <li class="none">
                          <a href="xref/index.html" title="Source Xref">Source Xref</a>
            </li>
                      <li class="none">
                          <a href="github-report.html" title="GitHub Report">GitHub Report</a>
            </li>
                      <li class="none">
                          <a href="changes-report.html" title="Changes Report">Changes Report</a>
            </li>
                      <li class="none">
                          <a href="dev-activity.html" title="Developer Activity">Developer Activity</a>
            </li>
                      <li class="none">
                          <a href="file-activity.html" title="File Activity">File Activity</a>
            </li>
                      <li class="none">
                          <a href="changelog.html" title="Change Log">Change Log</a>
            </li>
                      <li class="none">
                          <a href="taglist.html" title="Tag List">Tag List</a>
            </li>
                      <li class="none">
                          <a href="findbugs.html" title="FindBugs Report">FindBugs Report</a>
            </li>
                      <li class="none">
            <strong>CPD Report</strong>
          </li>
                      <li class="none">
                          <a href="pmd.html" title="PMD Report">PMD Report</a>
            </li>
                      <li class="none">
                          <a href="api/index.html" title="JavaDocs">JavaDocs</a>
            </li>
              </ul>
        </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2>CPD Results<a name="CPD_Results"></a></h2>
<p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 5.0.2.</p></div>
<div class="section">
<h2>Duplications<a name="Duplications"></a></h2>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#56">56</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#56">56</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>	public DbModelMariadb(String dbserver, String dbuser, String dbpasswd)
			throws WaarpDatabaseNoConnectionException {
		super(dbserver, dbuser, dbpasswd);
	}

	private final ReentrantLock lock = new ReentrantLock();

	@Override
	public void createTables(DbSession session) throws WaarpDatabaseNoConnectionException {
		// Create tables: configuration, hosts, rules, runner, cptrunner
		String createTableH2 = &quot;CREATE TABLE IF NOT EXISTS &quot;;
		String primaryKey = &quot; PRIMARY KEY &quot;;
		String notNull = &quot; NOT NULL &quot;;

		// Multiple Mode
		String action = createTableH2 + DbMultipleMonitor.table + &quot;(&quot;;
		DbMultipleMonitor.Columns[] mcolumns = DbMultipleMonitor.Columns
				.values();
		for (int i = 0; i &lt; mcolumns.length - 1; i++) {
			action += mcolumns[i].name() +
					DBType.getType(DbMultipleMonitor.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += mcolumns[mcolumns.length - 1].name() +
				DBType.getType(DbMultipleMonitor.dbTypes[mcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		DbRequest request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}
		DbMultipleMonitor multipleMonitor = new DbMultipleMonitor(session,
				Configuration.configuration.HOST_ID, 0, 0, 0);
		try {
			if (!multipleMonitor.exist())
				multipleMonitor.insert();
		} catch (WaarpDatabaseException e1) {
			e1.printStackTrace();
		}

		// Configuration
		action = createTableH2 + DbConfiguration.table + &quot;(&quot;;
		DbConfiguration.Columns[] ccolumns = DbConfiguration.Columns
				.values();
		for (int i = 0; i &lt; ccolumns.length - 1; i++) {
			action += ccolumns[i].name() +
					DBType.getType(DbConfiguration.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += ccolumns[ccolumns.length - 1].name() +
				DBType.getType(DbConfiguration.dbTypes[ccolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// HostConfiguration
		action = createTableH2 + DbHostConfiguration.table + &quot;(&quot;;
		DbHostConfiguration.Columns[] chcolumns = DbHostConfiguration.Columns
				.values();
		for (int i = 0; i &lt; chcolumns.length - 1; i++) {
			action += chcolumns[i].name() +
					DBType.getType(DbHostConfiguration.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += chcolumns[chcolumns.length - 1].name() +
				DBType.getType(DbHostConfiguration.dbTypes[chcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			// XXX FIX no return;
		} finally {
			request.close();
		}
		
		// hosts
		action = createTableH2 + DbHostAuth.table + &quot;(&quot;;
		DbHostAuth.Columns[] hcolumns = DbHostAuth.Columns.values();
		for (int i = 0; i &lt; hcolumns.length - 1; i++) {
			action += hcolumns[i].name() +
					DBType.getType(DbHostAuth.dbTypes[i]) + notNull + &quot;, &quot;;
		}
		action += hcolumns[hcolumns.length - 1].name() +
				DBType.getType(DbHostAuth.dbTypes[hcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// rules
		action = createTableH2 + DbRule.table + &quot;(&quot;;
		DbRule.Columns[] rcolumns = DbRule.Columns.values();
		for (int i = 0; i &lt; rcolumns.length - 1; i++) {
			action += rcolumns[i].name() +
					DBType.getType(DbRule.dbTypes[i]) + &quot;, &quot;;
		}
		action += rcolumns[rcolumns.length - 1].name() +
				DBType.getType(DbRule.dbTypes[rcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// runner
		action = createTableH2 + DbTaskRunner.table + &quot;(&quot;;
		DbTaskRunner.Columns[] acolumns = DbTaskRunner.Columns.values();
		for (int i = 0; i &lt; acolumns.length; i++) {
			action += acolumns[i].name() +
					DBType.getType(DbTaskRunner.dbTypes[i]) + notNull + &quot;, &quot;;
		}
		// Several columns for primary key
		action += &quot; CONSTRAINT runner_pk &quot; + primaryKey + &quot;(&quot;;
		for (int i = DbTaskRunner.NBPRKEY; i &gt; 1; i--) {
			action += acolumns[acolumns.length - i].name() + &quot;,&quot;;
		}
		action += acolumns[acolumns.length - 1].name() + &quot;))&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}
		// Index Runner
		action = &quot;CREATE INDEX IDX_RUNNER ON &quot; + DbTaskRunner.table + &quot;(&quot;;
		DbTaskRunner.Columns[] icolumns = DbTaskRunner.indexes;
		for (int i = 0; i &lt; icolumns.length - 1; i++) {
			action += icolumns[i].name() + &quot;, &quot;;
		}
		action += icolumns[icolumns.length - 1].name() + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// cptrunner
		/*
		 * # Table to handle any number of sequences: CREATE TABLE Sequences ( name VARCHAR(22) NOT
		 * NULL, seq INT UNSIGNED NOT NULL, # (or BIGINT) PRIMARY KEY name ); # Create a Sequence:
		 * INSERT INTO Sequences (name, seq) VALUES (?, 0); # Drop a Sequence: DELETE FROM Sequences
		 * WHERE name = ?; # Get a sequence number: UPDATE Sequences SET seq = LAST_INSERT_ID(seq +
		 * 1) WHERE name = ?; $seq = $db-&gt;LastInsertId();
		 */
		action = &quot;CREATE TABLE Sequences (name VARCHAR(22) NOT NULL PRIMARY KEY,&quot; +
				&quot;seq BIGINT NOT NULL)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}
		action = &quot;INSERT INTO Sequences (name, seq) VALUES ('&quot; + DbTaskRunner.fieldseq + &quot;', &quot; +
				(DbConstant.ILLEGALVALUE + 1) + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}
	}
	
	/*
	 * (non-Javadoc)
	 * @see org.waarp.openr66.databaseold.model.DbModel#resetSequence()
	 */
	@Override
	public void resetSequence(DbSession session, long newvalue)
			throws WaarpDatabaseNoConnectionException {
		String action = &quot;UPDATE Sequences SET seq = &quot; + newvalue +
				&quot; WHERE name = '&quot; + DbTaskRunner.fieldseq + &quot;'&quot;;
		DbRequest request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			return;
		} finally {
			request.close();
		}
		System.out.println(action);
	}

	/*
	 * (non-Javadoc)
	 * @see org.waarp.openr66.databaseold.model.DbModel#nextSequence()
	 */
	@Override
	public synchronized long nextSequence(DbSession dbSession)
			throws WaarpDatabaseNoConnectionException,
			WaarpDatabaseSqlException, WaarpDatabaseNoDataException {
		lock.lock();
		try {
			long result = DbConstant.ILLEGALVALUE;
			String action = &quot;SELECT seq FROM Sequences WHERE name = '&quot; +
					DbTaskRunner.fieldseq + &quot;' FOR UPDATE&quot;;
			DbPreparedStatement preparedStatement = new DbPreparedStatement(
					dbSession);
			try {
				dbSession.conn.setAutoCommit(false);
			} catch (SQLException e1) {
			}
			try {
				preparedStatement.createPrepareStatement(action);
				// Limit the search
				preparedStatement.executeQuery();
				if (preparedStatement.getNext()) {
					try {
						result = preparedStatement.getResultSet().getLong(1);
					} catch (SQLException e) {
						throw new WaarpDatabaseSqlException(e);
					}
				} else {
					throw new WaarpDatabaseNoDataException(
							&quot;No sequence found. Must be initialized first&quot;);
				}
			} finally {
				preparedStatement.realClose();
			}
			action = &quot;UPDATE Sequences SET seq = &quot; + (result + 1) +
					&quot; WHERE name = '&quot; + DbTaskRunner.fieldseq + &quot;'&quot;;
			try {
				preparedStatement.createPrepareStatement(action);
				// Limit the search
				preparedStatement.executeUpdate();
			} finally {
				preparedStatement.realClose();
			}
			return result;
		} finally {
			try {
				dbSession.conn.setAutoCommit(true);
			} catch (SQLException e1) {
			}
			lock.unlock();
		}
	}

	public boolean upgradeDb(DbSession session, String version) throws WaarpDatabaseNoConnectionException {
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_13.getVersion())) {
			System.out.println(version+&quot; to &quot;+R66Versions.V2_4_13.getVersion()+&quot;? &quot;+true);
			String createTableH2 = &quot;CREATE TABLE IF NOT EXISTS &quot;;
			String primaryKey = &quot; PRIMARY KEY &quot;;
			String notNull = &quot; NOT NULL &quot;;
	
			// HostConfiguration
			String action = createTableH2 + DbHostConfiguration.table + &quot;(&quot;;
			DbHostConfiguration.Columns[] chcolumns = DbHostConfiguration.Columns
					.values();
			for (int i = 0; i &lt; chcolumns.length - 1; i++) {
				action += chcolumns[i].name() +
						DBType.getType(DbHostConfiguration.dbTypes[i]) + notNull +
						&quot;, &quot;;
			}
			action += chcolumns[chcolumns.length - 1].name() +
					DBType.getType(DbHostConfiguration.dbTypes[chcolumns.length - 1]) +
					primaryKey + &quot;)&quot;;
			System.out.println(action);
			DbRequest request = new DbRequest(session);
			try {
				request.query(action);
			} catch (WaarpDatabaseSqlException e) {
				e.printStackTrace();
				return false;
			} finally {
				request.close();
			}
		}
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_17.getVersion())) {
			System.out.println(version+&quot; to &quot;+R66Versions.V2_4_17.getVersion()+&quot;? &quot;+true);
			DbRequest request = new DbRequest(session);
			try {
				String command = &quot;ALTER TABLE &quot;
						+ DbTaskRunner.table
						+ &quot; ADD COLUMN &quot;
						+
						DbTaskRunner.Columns.TRANSFERINFO.name()
						+ &quot; &quot;
						+
						DBType.getType(DbTaskRunner.dbTypes[DbTaskRunner.Columns.TRANSFERINFO
								.ordinal()]) +
						&quot; AFTER &quot; + DbTaskRunner.Columns.FILEINFO.name();
				request.query(command);
			} catch (WaarpDatabaseSqlException e) {
				e.printStackTrace();
				//return false;
			} finally {
				request.close();
			}
		}
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_23.getVersion())) {
			System.out.println(version+&quot; to &quot;+R66Versions.V2_4_23.getVersion()+&quot;? &quot;+true);
			DbRequest request = new DbRequest(session);
			try {
				String command = &quot;ALTER TABLE &quot;
						+ DbHostAuth.table
						+ &quot; ADD COLUMN &quot;
						+
						DbHostAuth.Columns.ISACTIVE.name()
						+ &quot; &quot;
						+
						DBType.getType(DbHostAuth.dbTypes[DbHostAuth.Columns.ISACTIVE
								.ordinal()]) +
						&quot; AFTER &quot; + DbHostAuth.Columns.ISCLIENT.name();
				request.query(command);
				command = &quot;UPDATE &quot;+ DbHostAuth.table+&quot; SET &quot;+DbHostAuth.Columns.ISACTIVE.name()+&quot; = &quot;+true;
				request.query(command);
			} catch (WaarpDatabaseSqlException e) {
				e.printStackTrace();
				//return false;
			} finally {
				request.close();
			}
			try {
				String command = &quot;ALTER TABLE &quot;
						+ DbHostAuth.table
						+ &quot; ADD COLUMN &quot;
						+
						DbHostAuth.Columns.ISPROXIFIED.name()
						+ &quot; &quot;
						+
						DBType.getType(DbHostAuth.dbTypes[DbHostAuth.Columns.ISPROXIFIED
								.ordinal()]) +
						&quot; AFTER &quot; + DbHostAuth.Columns.ISACTIVE.name();
				request.query(command);
				command = &quot;UPDATE &quot;+ DbHostAuth.table+&quot; SET &quot;+DbHostAuth.Columns.ISPROXIFIED.name()+&quot; = &quot;+false;
				request.query(command);
			} catch (WaarpDatabaseSqlException e) {
				e.printStackTrace();
				//return false;
			} finally {
				request.close();
			}
		}
		if (PartnerConfiguration.isVersion2GTVersion1(version, R66Versions.V2_4_25.getVersion())) {
			System.out.println(version+&quot; to &quot;+R66Versions.V2_4_25.getVersion()+&quot;? &quot;+true);
			String command = &quot;ALTER TABLE &quot;+DbTaskRunner.table+&quot; MODIFY &quot;+
				DbTaskRunner.Columns.FILENAME.name()+ &quot; &quot;+
				DBType.getType(DbTaskRunner.dbTypes[DbTaskRunner.Columns.FILENAME.ordinal()]) + 
				&quot; NOT NULL &quot;;
			DbRequest request = new DbRequest(session);
			try {
				System.out.println(&quot;Command: &quot;+command);
				request.query(command);
			} catch (WaarpDatabaseSqlException e) {
				e.printStackTrace();
				return false;
			} finally {
				request.close();
			}
			command = &quot;ALTER TABLE &quot;+DbTaskRunner.table+&quot; MODIFY &quot;+
					DbTaskRunner.Columns.ORIGINALNAME.name()+ &quot; &quot;+
					DBType.getType(DbTaskRunner.dbTypes[DbTaskRunner.Columns.ORIGINALNAME.ordinal()]) + 
					&quot; NOT NULL &quot;;
			request = new DbRequest(session);
			try {
				System.out.println(&quot;Command: &quot;+command);
				request.query(command);
			} catch (WaarpDatabaseSqlException e) {
				e.printStackTrace();
				return false;
			} finally {
				request.close();
			}
		}
		DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_25.getVersion());
		return true;
	}
	
	public boolean needUpgradeDb(DbSession session, String version, boolean tryFix)
			throws WaarpDatabaseNoConnectionException {
		// Check if the database is up to date
		DbRequest request = null;
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_13.getVersion())) {
			try {
				request = new DbRequest(session);
				request.select(&quot;select &quot;+DbHostConfiguration.Columns.HOSTID.name()+&quot; from &quot;+DbHostConfiguration.table+
						&quot; where &quot;+DbHostConfiguration.Columns.HOSTID+&quot; = '&quot;+Configuration.configuration.HOST_ID+&quot;'&quot;);
				request.close();
				DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_13.getVersion());
			} catch (WaarpDatabaseSqlException e) {
				return ! upgradeDb(session, version);
			} finally {
				if (request != null) {
					request.close();
				}
			}
		}
		request = null;
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_17.getVersion())) {
			try {
				request = new DbRequest(session);
				request.select(&quot;select &quot;+DbTaskRunner.Columns.TRANSFERINFO.name()+&quot; from &quot;+DbTaskRunner.table+
						&quot; where &quot;+DbTaskRunner.Columns.SPECIALID+&quot; = &quot;+DbConstant.ILLEGALVALUE);
				request.close();
				DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_17.getVersion());
			} catch (WaarpDatabaseSqlException e) {
				return ! upgradeDb(session, version);
			} finally {
				if (request != null) {
					request.close();
				}
			}
		}
		request = null;
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_23.getVersion())) {
			try {
				request = new DbRequest(session);
				request.select(&quot;select &quot;+DbHostAuth.Columns.ISACTIVE.name()+&quot; from &quot;+DbHostAuth.table+
						&quot; where &quot;+DbHostAuth.Columns.PORT+&quot; = &quot;+0);
				request.close();
				DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_23.getVersion());
			} catch (WaarpDatabaseSqlException e) {
				return ! upgradeDb(session, version);
			} finally {
				if (request != null) {
					request.close();
				}
			}
		}
		request = null;
		if (PartnerConfiguration.isVersion2GTVersion1(version, R66Versions.V2_4_25.getVersion())) {
			try {
				if (upgradeDb(session, version)) {
					DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_25.getVersion());
				} else {
					return true;
				}
			} finally {
			}
		}
		return false;
	}

}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#67">67</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#67">67</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#60">60</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		String primaryKey = &quot; PRIMARY KEY &quot;;
		String notNull = &quot; NOT NULL &quot;;

		// Multiple Mode
		String action = createTableH2 + DbMultipleMonitor.table + &quot;(&quot;;
		DbMultipleMonitor.Columns[] mcolumns = DbMultipleMonitor.Columns
				.values();
		for (int i = 0; i &lt; mcolumns.length - 1; i++) {
			action += mcolumns[i].name() +
					DBType.getType(DbMultipleMonitor.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += mcolumns[mcolumns.length - 1].name() +
				DBType.getType(DbMultipleMonitor.dbTypes[mcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		DbRequest request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}
		DbMultipleMonitor multipleMonitor = new DbMultipleMonitor(session,
				Configuration.configuration.HOST_ID, 0, 0, 0);
		try {
			if (!multipleMonitor.exist())
				multipleMonitor.insert();
		} catch (WaarpDatabaseException e1) {
			e1.printStackTrace();
		}

		// Configuration
		action = createTableH2 + DbConfiguration.table + &quot;(&quot;;
		DbConfiguration.Columns[] ccolumns = DbConfiguration.Columns
				.values();
		for (int i = 0; i &lt; ccolumns.length - 1; i++) {
			action += ccolumns[i].name() +
					DBType.getType(DbConfiguration.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += ccolumns[ccolumns.length - 1].name() +
				DBType.getType(DbConfiguration.dbTypes[ccolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// HostConfiguration
		action = createTableH2 + DbHostConfiguration.table + &quot;(&quot;;
		DbHostConfiguration.Columns[] chcolumns = DbHostConfiguration.Columns
				.values();
		for (int i = 0; i &lt; chcolumns.length - 1; i++) {
			action += chcolumns[i].name() +
					DBType.getType(DbHostConfiguration.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += chcolumns[chcolumns.length - 1].name() +
				DBType.getType(DbHostConfiguration.dbTypes[chcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			// XXX FIX no return;
		} finally {
			request.close();
		}
		
		// hosts
		action = createTableH2 + DbHostAuth.table + &quot;(&quot;;
		DbHostAuth.Columns[] hcolumns = DbHostAuth.Columns.values();
		for (int i = 0; i &lt; hcolumns.length - 1; i++) {
			action += hcolumns[i].name() +
					DBType.getType(DbHostAuth.dbTypes[i]) + notNull + &quot;, &quot;;
		}
		action += hcolumns[hcolumns.length - 1].name() +
				DBType.getType(DbHostAuth.dbTypes[hcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// rules
		action = createTableH2 + DbRule.table + &quot;(&quot;;
		DbRule.Columns[] rcolumns = DbRule.Columns.values();
		for (int i = 0; i &lt; rcolumns.length - 1; i++) {
			action += rcolumns[i].name() +
					DBType.getType(DbRule.dbTypes[i]) + &quot;, &quot;;
		}
		action += rcolumns[rcolumns.length - 1].name() +
				DBType.getType(DbRule.dbTypes[rcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// runner
		action = createTableH2 + DbTaskRunner.table + &quot;(&quot;;
		DbTaskRunner.Columns[] acolumns = DbTaskRunner.Columns.values();
		for (int i = 0; i &lt; acolumns.length; i++) {
			action += acolumns[i].name() +
					DBType.getType(DbTaskRunner.dbTypes[i]) + notNull + &quot;, &quot;;
		}
		// Several columns for primary key
		action += &quot; CONSTRAINT runner_pk &quot; + primaryKey + &quot;(&quot;;
		for (int i = DbTaskRunner.NBPRKEY; i &gt; 1; i--) {
			action += acolumns[acolumns.length - i].name() + &quot;,&quot;;
		}
		action += acolumns[acolumns.length - 1].name() + &quot;))&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}
		// Index Runner
		action = &quot;CREATE INDEX IDX_RUNNER ON &quot; + DbTaskRunner.table + &quot;(&quot;;
		DbTaskRunner.Columns[] icolumns = DbTaskRunner.indexes;
		for (int i = 0; i &lt; icolumns.length - 1; i++) {
			action += icolumns[i].name() + &quot;, &quot;;
		}
		action += icolumns[icolumns.length - 1].name() + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// cptrunner
		/*
		 * # Table to handle any number of sequences: CREATE TABLE Sequences ( name VARCHAR(22) NOT
		 * NULL, seq INT UNSIGNED NOT NULL, # (or BIGINT) PRIMARY KEY name ); # Create a Sequence:
		 * INSERT INTO Sequences (name, seq) VALUES (?, 0); # Drop a Sequence: DELETE FROM Sequences
		 * WHERE name = ?; # Get a sequence number: UPDATE Sequences SET seq = LAST_INSERT_ID(seq +
		 * 1) WHERE name = ?; $seq = $db-&gt;LastInsertId();
		 */
		action = &quot;CREATE TABLE Sequences (name VARCHAR(22) NOT NULL PRIMARY KEY,&quot; +</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#60">60</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#63">63</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#63">63</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>	@Override
	public void createTables(DbSession session) throws WaarpDatabaseNoConnectionException {
		// Create tables: configuration, hosts, rules, runner, cptrunner
		String createTableH2 = &quot;CREATE TABLE IF NOT EXISTS &quot;;
		String primaryKey = &quot; PRIMARY KEY &quot;;
		String notNull = &quot; NOT NULL &quot;;

		// Multiple Mode
		String action = createTableH2 + DbMultipleMonitor.table + &quot;(&quot;;
		DbMultipleMonitor.Columns[] mcolumns = DbMultipleMonitor.Columns
				.values();
		for (int i = 0; i &lt; mcolumns.length - 1; i++) {
			action += mcolumns[i].name() +
					DBType.getType(DbMultipleMonitor.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += mcolumns[mcolumns.length - 1].name() +
				DBType.getType(DbMultipleMonitor.dbTypes[mcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		DbRequest request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}
		DbMultipleMonitor multipleMonitor = new DbMultipleMonitor(session,
				Configuration.configuration.HOST_ID, 0, 0, 0);
		try {
			if (!multipleMonitor.exist())
				multipleMonitor.insert();
		} catch (WaarpDatabaseException e1) {
			e1.printStackTrace();
		}

		// Configuration
		action = createTableH2 + DbConfiguration.table + &quot;(&quot;;
		DbConfiguration.Columns[] ccolumns = DbConfiguration.Columns
				.values();
		for (int i = 0; i &lt; ccolumns.length - 1; i++) {
			action += ccolumns[i].name() +
					DBType.getType(DbConfiguration.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += ccolumns[ccolumns.length - 1].name() +
				DBType.getType(DbConfiguration.dbTypes[ccolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// HostConfiguration
		action = createTableH2 + DbHostConfiguration.table + &quot;(&quot;;
		DbHostConfiguration.Columns[] chcolumns = DbHostConfiguration.Columns
				.values();
		for (int i = 0; i &lt; chcolumns.length - 1; i++) {
			action += chcolumns[i].name() +
					DBType.getType(DbHostConfiguration.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += chcolumns[chcolumns.length - 1].name() +
				DBType.getType(DbHostConfiguration.dbTypes[chcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			// XXX FIX no return;
		} finally {
			request.close();
		}
				
		// hosts
		action = createTableH2 + DbHostAuth.table + &quot;(&quot;;
		DbHostAuth.Columns[] hcolumns = DbHostAuth.Columns.values();
		for (int i = 0; i &lt; hcolumns.length - 1; i++) {
			action += hcolumns[i].name() +
					DBType.getType(DbHostAuth.dbTypes[i]) + notNull + &quot;, &quot;;
		}
		action += hcolumns[hcolumns.length - 1].name() +
				DBType.getType(DbHostAuth.dbTypes[hcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// rules
		action = createTableH2 + DbRule.table + &quot;(&quot;;
		DbRule.Columns[] rcolumns = DbRule.Columns.values();
		for (int i = 0; i &lt; rcolumns.length - 1; i++) {
			action += rcolumns[i].name() +
					DBType.getType(DbRule.dbTypes[i]) + &quot;, &quot;;
		}
		action += rcolumns[rcolumns.length - 1].name() +
				DBType.getType(DbRule.dbTypes[rcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// runner
		action = createTableH2 + DbTaskRunner.table + &quot;(&quot;;
		DbTaskRunner.Columns[] acolumns = DbTaskRunner.Columns.values();
		for (int i = 0; i &lt; acolumns.length; i++) {
			action += acolumns[i].name() +
					DBType.getType(DbTaskRunner.dbTypes[i]) + notNull + &quot;, &quot;;
		}
		// Several columns for primary key
		action += &quot; CONSTRAINT runner_pk &quot; + primaryKey + &quot;(&quot;;
		for (int i = DbTaskRunner.NBPRKEY; i &gt; 1; i--) {
			action += acolumns[acolumns.length - i].name() + &quot;,&quot;;
		}
		action += acolumns[acolumns.length - 1].name() + &quot;))&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}
		// Index Runner
		action = &quot;CREATE INDEX IF NOT EXISTS IDX_RUNNER ON &quot; + DbTaskRunner.table + &quot;(&quot;;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#64">64</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#60">60</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>		String primaryKey = &quot; PRIMARY KEY &quot;;
		String notNull = &quot; NOT NULL &quot;;

		// Multiple Mode
		String action = createTableH2 + DbMultipleMonitor.table + &quot;(&quot;;
		DbMultipleMonitor.Columns[] mcolumns = DbMultipleMonitor.Columns
				.values();
		for (int i = 0; i &lt; mcolumns.length - 1; i++) {
			action += mcolumns[i].name() +
					DBType.getType(DbMultipleMonitor.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += mcolumns[mcolumns.length - 1].name() +
				DBType.getType(DbMultipleMonitor.dbTypes[mcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		DbRequest request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}
		DbMultipleMonitor multipleMonitor = new DbMultipleMonitor(session,
				Configuration.configuration.HOST_ID, 0, 0, 0);
		try {
			if (!multipleMonitor.exist())
				multipleMonitor.insert();
		} catch (WaarpDatabaseException e1) {
			e1.printStackTrace();
		}

		// Configuration
		action = createTableH2 + DbConfiguration.table + &quot;(&quot;;
		DbConfiguration.Columns[] ccolumns = DbConfiguration.Columns
				.values();
		for (int i = 0; i &lt; ccolumns.length - 1; i++) {
			action += ccolumns[i].name() +
					DBType.getType(DbConfiguration.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += ccolumns[ccolumns.length - 1].name() +
				DBType.getType(DbConfiguration.dbTypes[ccolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// HostConfiguration
		action = createTableH2 + DbHostConfiguration.table + &quot;(&quot;;
		DbHostConfiguration.Columns[] chcolumns = DbHostConfiguration.Columns
				.values();
		for (int i = 0; i &lt; chcolumns.length - 1; i++) {
			action += chcolumns[i].name() +
					DBType.getType(DbHostConfiguration.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += chcolumns[chcolumns.length - 1].name() +
				DBType.getType(DbHostConfiguration.dbTypes[chcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			// XXX FIX no return;
		} finally {
			request.close();
		}
				
		// hosts
		action = createTableH2 + DbHostAuth.table + &quot;(&quot;;
		DbHostAuth.Columns[] hcolumns = DbHostAuth.Columns.values();
		for (int i = 0; i &lt; hcolumns.length - 1; i++) {
			action += hcolumns[i].name() +
					DBType.getType(DbHostAuth.dbTypes[i]) + notNull + &quot;, &quot;;
		}
		action += hcolumns[hcolumns.length - 1].name() +
				DBType.getType(DbHostAuth.dbTypes[hcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// rules
		action = createTableH2 + DbRule.table + &quot;(&quot;;
		DbRule.Columns[] rcolumns = DbRule.Columns.values();
		for (int i = 0; i &lt; rcolumns.length - 1; i++) {
			action += rcolumns[i].name() +
					DBType.getType(DbRule.dbTypes[i]) + &quot;, &quot;;
		}
		action += rcolumns[rcolumns.length - 1].name() +
				DBType.getType(DbRule.dbTypes[rcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// runner
		action = createTableH2 + DbTaskRunner.table + &quot;(&quot;;
		DbTaskRunner.Columns[] acolumns = DbTaskRunner.Columns.values();
		for (int i = 0; i &lt; acolumns.length; i++) {
			action += acolumns[i].name() +
					DBType.getType(DbTaskRunner.dbTypes[i]) + notNull + &quot;, &quot;;
		}
		// Several columns for primary key
		action += &quot; CONSTRAINT runner_pk &quot; + primaryKey + &quot;(&quot;;
		for (int i = DbTaskRunner.NBPRKEY; i &gt; 1; i--) {
			action += acolumns[acolumns.length - i].name() + &quot;,&quot;;
		}
		action += acolumns[acolumns.length - 1].name() + &quot;))&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			// XXX FIX no return;
		} finally {
			request.close();
		}
		// Index Runner
		action = &quot;CREATE INDEX IF NOT EXISTS IDX_RUNNER ON &quot; + DbTaskRunner.table + &quot;(&quot;;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\gateway\kernel\exec\JavaExecutorWaarpFtp4jClient.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/gateway/kernel/exec/JavaExecutorWaarpFtp4jClient.html#100">100</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\context\task\FtpTransferTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/FtpTransferTask.html#106">106</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>			logger.error(&quot;Not enough arguments&quot;);
			return;
		}
		String filepath = null;
		String filename = null;
		String requested = null;
		int port = 21;
		String user = null;
		String pwd = null;
		String acct = null;
		boolean isPassive = true;
		int ssl = 0; // -1 native, 1 auth
		String cwd = null;
		int digest = 0; // 1 CRC, 2 MD5, 3 SHA1
		String command = null;
		int codeCommand = 0; // -1 get, 1 put, 2 append
		String preArgs = null;
		String postArgs = null;
		/*
		 * &quot;-file filepath &lt;br&gt; -to requestedHost &lt;br&gt; -port port &lt;br&gt; -user user &lt;br&gt; -pwd pwd &lt;br&gt;
		 * [-account account] &lt;br&gt; [-mode active/passive] &lt;br&gt; [-ssl no/implicit/explicit]&lt;br&gt; [-cwd
		 * remotepath] &lt;br&gt; [-digest (crc,md5,sha1)] &lt;br&gt; [-pre extraCommand1 with ',' as separator
		 * of arguments] &lt;br&gt; -command command from (get,put,append) &lt;br&gt; [-post extraCommand2 with
		 * ',' as separator of arguments]&quot; &lt;br&gt;
		 */
		for (int i = 0; i &lt; args.length; i++) {
			if (args[i].equalsIgnoreCase(&quot;-file&quot;)) {
				i++;
				filepath = args[i];
				filename = new File(filepath).getName();
			} else if (args[i].equalsIgnoreCase(&quot;-to&quot;)) {
				i++;
				requested = args[i];
			} else if (args[i].equalsIgnoreCase(&quot;-port&quot;)) {
				i++;
				port = Integer.parseInt(args[i]);
			} else if (args[i].equalsIgnoreCase(&quot;-user&quot;)) {
				i++;
				user = args[i];
			} else if (args[i].equalsIgnoreCase(&quot;-pwd&quot;)) {
				i++;
				pwd = args[i];
			} else if (args[i].equalsIgnoreCase(&quot;-account&quot;)) {
				i++;
				acct = args[i];
			} else if (args[i].equalsIgnoreCase(&quot;-mode&quot;)) {
				i++;
				isPassive = (args[i].equalsIgnoreCase(&quot;passive&quot;));
			} else if (args[i].equalsIgnoreCase(&quot;-ssl&quot;)) {
				i++;
				if (args[i].equalsIgnoreCase(&quot;implicit&quot;)) {
					ssl = -1;
				} else if (args[i].equalsIgnoreCase(&quot;explicit&quot;)) {
					ssl = 1;
				} else {
					ssl = 0;
				}
			} else if (args[i].equalsIgnoreCase(&quot;-cwd&quot;)) {
				i++;
				cwd = args[i];
			} else if (args[i].equalsIgnoreCase(&quot;-digest&quot;)) {
				i++;
				if (args[i].equalsIgnoreCase(&quot;crc&quot;)) {
					digest = 1;
				} else if (args[i].equalsIgnoreCase(&quot;md5&quot;)) {
					digest = 2;
				} else if (args[i].equalsIgnoreCase(&quot;sha1&quot;)) {
					digest = 3;
				} else {
					digest = 0;
				}
			} else if (args[i].equalsIgnoreCase(&quot;-pre&quot;)) {
				i++;
				preArgs = args[i].replace(',', ' ');
			} else if (args[i].equalsIgnoreCase(&quot;-post&quot;)) {
				i++;
				postArgs = args[i].replace(',', ' ');
			} else if (args[i].equalsIgnoreCase(&quot;-command&quot;)) {
				i++;
				command = args[i];
				// get,put,append,list
				// -1 get, 1 put, 2 append
				if (command.equalsIgnoreCase(&quot;get&quot;)) {
					codeCommand = -1;
				} else if (command.equalsIgnoreCase(&quot;put&quot;)) {
					codeCommand = 1;
				} else if (command.equalsIgnoreCase(&quot;append&quot;)) {
					codeCommand = 2;
				} else {
					// error
					codeCommand = 0;
				}
			}
		}
		if (filepath == null || requested == null || port &lt;= 0 || user == null || pwd == null ||
				codeCommand == 0) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#427">427</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#474">474</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#474">474</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			command = &quot;ALTER TABLE &quot;+DbTaskRunner.table+&quot; ALTER COLUMN &quot;+
					DbTaskRunner.Columns.ORIGINALNAME.name()+ &quot; &quot;+
					DBType.getType(DbTaskRunner.dbTypes[DbTaskRunner.Columns.ORIGINALNAME.ordinal()]) + 
					&quot; NOT NULL &quot;;
			request = new DbRequest(session);
			try {
				System.out.println(&quot;Command: &quot;+command);
				request.query(command);
			} catch (WaarpDatabaseSqlException e) {
				e.printStackTrace();
				return false;
			} finally {
				request.close();
			}
		}
		DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_25.getVersion());
		return true;
	}
	
	public boolean needUpgradeDb(DbSession session, String version, boolean tryFix)
			throws WaarpDatabaseNoConnectionException {
		// Check if the database is up to date
		DbRequest request = null;
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_13.getVersion())) {
			try {
				request = new DbRequest(session);
				request.select(&quot;select &quot;+DbHostConfiguration.Columns.HOSTID.name()+&quot; from &quot;+DbHostConfiguration.table+
						&quot; where &quot;+DbHostConfiguration.Columns.HOSTID+&quot; = '&quot;+Configuration.configuration.HOST_ID+&quot;'&quot;);
				request.close();
				DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_13.getVersion());
			} catch (WaarpDatabaseSqlException e) {
				return ! upgradeDb(session, version);
			} finally {
				if (request != null) {
					request.close();
				}
			}
		}
		request = null;
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_17.getVersion())) {
			try {
				request = new DbRequest(session);
				request.select(&quot;select &quot;+DbTaskRunner.Columns.TRANSFERINFO.name()+&quot; from &quot;+DbTaskRunner.table+
						&quot; where &quot;+DbTaskRunner.Columns.SPECIALID+&quot; = &quot;+DbConstant.ILLEGALVALUE);
				request.close();
				DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_17.getVersion());
			} catch (WaarpDatabaseSqlException e) {
				return ! upgradeDb(session, version);
			} finally {
				if (request != null) {
					request.close();
				}
			}
		}
		request = null;
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_23.getVersion())) {
			try {
				request = new DbRequest(session);
				request.select(&quot;select &quot;+DbHostAuth.Columns.ISACTIVE.name()+&quot; from &quot;+DbHostAuth.table+
						&quot; where &quot;+DbHostAuth.Columns.PORT+&quot; = &quot;+0);
				request.close();
				DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_23.getVersion());
			} catch (WaarpDatabaseSqlException e) {
				return ! upgradeDb(session, version);
			} finally {
				if (request != null) {
					request.close();
				}
			}
		}
		request = null;
		if (PartnerConfiguration.isVersion2GTVersion1(version, R66Versions.V2_4_25.getVersion())) {
			try {
				if (upgradeDb(session, version)) {
					DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_25.getVersion());
				} else {
					return true;
				}
			} finally {
			}
		}
		return false;
	}
	
	
}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#414">414</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#397">397</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			DbRequest request = new DbRequest(session);
			try {
				System.out.println(&quot;Command: &quot;+command);
				request.query(command);
			} catch (WaarpDatabaseSqlException e) {
				e.printStackTrace();
				return false;
			} finally {
				request.close();
			}
		}
		DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_25.getVersion());
		return true;
	}
	
	public boolean needUpgradeDb(DbSession session, String version, boolean tryFix)
			throws WaarpDatabaseNoConnectionException {
		// Check if the database is up to date
		DbRequest request = null;
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_13.getVersion())) {
			try {
				request = new DbRequest(session);
				request.select(&quot;select &quot;+DbHostConfiguration.Columns.HOSTID.name()+&quot; from &quot;+DbHostConfiguration.table+
						&quot; where &quot;+DbHostConfiguration.Columns.HOSTID+&quot; = '&quot;+Configuration.configuration.HOST_ID+&quot;'&quot;);
				request.close();
				DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_13.getVersion());
			} catch (WaarpDatabaseSqlException e) {
				return ! upgradeDb(session, version);
			} finally {
				if (request != null) {
					request.close();
				}
			}
		}
		request = null;
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_17.getVersion())) {
			try {
				request = new DbRequest(session);
				request.select(&quot;select &quot;+DbTaskRunner.Columns.TRANSFERINFO.name()+&quot; from &quot;+DbTaskRunner.table+
						&quot; where &quot;+DbTaskRunner.Columns.SPECIALID+&quot; = &quot;+DbConstant.ILLEGALVALUE);
				request.close();
				DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_17.getVersion());
			} catch (WaarpDatabaseSqlException e) {
				return ! upgradeDb(session, version);
			} finally {
				if (request != null) {
					request.close();
				}
			}
		}
		request = null;
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_23.getVersion())) {
			try {
				request = new DbRequest(session);
				request.select(&quot;select &quot;+DbHostAuth.Columns.ISACTIVE.name()+&quot; from &quot;+DbHostAuth.table+
						&quot; where &quot;+DbHostAuth.Columns.PORT+&quot; = &quot;+0);
				request.close();
				DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_23.getVersion());
			} catch (WaarpDatabaseSqlException e) {
				return ! upgradeDb(session, version);
			} finally {
				if (request != null) {
					request.close();
				}
			}
		}
		request = null;
		if (PartnerConfiguration.isVersion2GTVersion1(version, R66Versions.V2_4_25.getVersion())) {
			try {
				if (upgradeDb(session, version)) {
					DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_25.getVersion());
				} else {
					return true;
				}
			} finally {
			}
		}
		return false;
	}

}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#431">431</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#478">478</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#478">478</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#414">414</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#397">397</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>			request = new DbRequest(session);
			try {
				System.out.println(&quot;Command: &quot;+command);
				request.query(command);
			} catch (WaarpDatabaseSqlException e) {
				e.printStackTrace();
				return false;
			} finally {
				request.close();
			}
		}
		DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_25.getVersion());
		return true;
	}
	
	public boolean needUpgradeDb(DbSession session, String version, boolean tryFix)
			throws WaarpDatabaseNoConnectionException {
		// Check if the database is up to date
		DbRequest request = null;
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_13.getVersion())) {
			try {
				request = new DbRequest(session);
				request.select(&quot;select &quot;+DbHostConfiguration.Columns.HOSTID.name()+&quot; from &quot;+DbHostConfiguration.table+
						&quot; where &quot;+DbHostConfiguration.Columns.HOSTID+&quot; = '&quot;+Configuration.configuration.HOST_ID+&quot;'&quot;);
				request.close();
				DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_13.getVersion());
			} catch (WaarpDatabaseSqlException e) {
				return ! upgradeDb(session, version);
			} finally {
				if (request != null) {
					request.close();
				}
			}
		}
		request = null;
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_17.getVersion())) {
			try {
				request = new DbRequest(session);
				request.select(&quot;select &quot;+DbTaskRunner.Columns.TRANSFERINFO.name()+&quot; from &quot;+DbTaskRunner.table+
						&quot; where &quot;+DbTaskRunner.Columns.SPECIALID+&quot; = &quot;+DbConstant.ILLEGALVALUE);
				request.close();
				DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_17.getVersion());
			} catch (WaarpDatabaseSqlException e) {
				return ! upgradeDb(session, version);
			} finally {
				if (request != null) {
					request.close();
				}
			}
		}
		request = null;
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_23.getVersion())) {
			try {
				request = new DbRequest(session);
				request.select(&quot;select &quot;+DbHostAuth.Columns.ISACTIVE.name()+&quot; from &quot;+DbHostAuth.table+
						&quot; where &quot;+DbHostAuth.Columns.PORT+&quot; = &quot;+0);
				request.close();
				DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_23.getVersion());
			} catch (WaarpDatabaseSqlException e) {
				return ! upgradeDb(session, version);
			} finally {
				if (request != null) {
					request.close();
				}
			}
		}
		request = null;
		if (PartnerConfiguration.isVersion2GTVersion1(version, R66Versions.V2_4_25.getVersion())) {
			try {
				if (upgradeDb(session, version)) {
					DbHostConfiguration.updateVersionDb(session, Configuration.configuration.HOST_ID, R66Versions.V2_4_25.getVersion());
				} else {
					return true;
				}
			} finally {
			}
		}
		return false;
	}
	
	
}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\adminssl\HttpSslHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/adminssl/HttpSslHandler.html#407">407</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\adminssl\HttpSslHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/adminssl/HttpSslHandler.html#517">517</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>				DbPreparedStatement preparedStatement = null;
				try {
					preparedStatement =
							DbTaskRunner.getFilterPrepareStatement(dbSession, LIMITROW, false,
									startid, stopid, tstart, tstop, rule, req,
									pending, transfer, error, done, all);
					preparedStatement.executeQuery();
					StringBuilder builder = new StringBuilder();
					int i = 0;
					while (preparedStatement.getNext()) {
						try {
							i++;
							DbTaskRunner taskRunner = DbTaskRunner
									.getFromStatement(preparedStatement);
							long specid = taskRunner.getSpecialId();
							if (idstart == null || idstart &gt; specid) {
								idstart = specid;
							}
							LocalChannelReference lcr =
									Configuration.configuration.getLocalTransaction().
											getFromRequest(taskRunner.getKey());
							builder.append(taskRunner.toSpecializedHtml(authentHttp, body,
									lcr != null ? Messages.getString(&quot;HttpSslHandler.Active&quot;) : Messages.getString(&quot;HttpSslHandler.NotActive&quot;)));
							if (i &gt; LIMITROW) {
								break;
							}
						} catch (WaarpDatabaseException e) {
							// try to continue if possible
							logger.warn(&quot;An error occurs while accessing a Runner: {}&quot;,
									e.getMessage());
							continue;
						}
					}
					preparedStatement.realClose();
					body = builder.toString();
				} catch (WaarpDatabaseException e) {
					if (preparedStatement != null) {
						preparedStatement.realClose();
					}
					logger.warn(&quot;OpenR66 Web Error {}&quot;, e.getMessage());
				}
				head = resetOptionTransfer(head, startid == null ? (idstart != null ? idstart.toString() : &quot;&quot;) : startid,
						stopid == null ? &quot;&quot; : stopid, start, stop,
						rule == null ? &quot;&quot; : rule, req == null ? &quot;&quot; : req,
						pending, transfer, error, done, all);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\context\task\ExecMoveTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/ExecMoveTask.html#96">96</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\context\task\ExecOutputTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/ExecOutputTask.html#102">102</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>				move(result.status, result.result, finalname);
				localExecClient.disconnect();
				return;
			} // else continue
		}
		String[] args = finalname.split(&quot; &quot;);
		File exec = new File(args[0]);
		if (exec.isAbsolute()) {
			if (!exec.canExecute()) {
				logger.error(&quot;Exec command is not executable: &quot; + finalname);
				R66Result result = new R66Result(session, false,
						ErrorCode.CommandNotFound, session.getRunner());
				futureCompletion.setResult(result);
				futureCompletion.cancel();
				return;
			}
		}
		CommandLine commandLine = new CommandLine(args[0]);
		for (int i = 1; i &lt; args.length; i++) {
			commandLine.addArgument(args[i]);
		}
		DefaultExecutor defaultExecutor = new DefaultExecutor();
		PipedInputStream inputStream = new PipedInputStream();
		PipedOutputStream outputStream = null;
		try {
			outputStream = new PipedOutputStream(inputStream);
		} catch (IOException e1) {
			try {
				inputStream.close();
			} catch (IOException e) {
			}
			logger.error(&quot;Exception: &quot; + e1.getMessage() +
					&quot; Exec in error with &quot; + commandLine.toString(), e1);
			futureCompletion.setFailure(e1);
			return;
		}
		PumpStreamHandler pumpStreamHandler = new PumpStreamHandler(
				outputStream, null);
		defaultExecutor.setStreamHandler(pumpStreamHandler);
		int[] correctValues = {
				0, 1 };
		defaultExecutor.setExitValues(correctValues);
		ExecuteWatchdog watchdog = null;

		if (delay &gt; 0) {
			watchdog = new ExecuteWatchdog(delay);
			defaultExecutor.setWatchdog(watchdog);
		}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\data\DbRule.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbRule.html#482">482</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\data\DbRule.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbRule.html#511">511</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>	protected void setFromArray() throws WaarpDatabaseSqlException {
		ids = (String) allFields[Columns.HOSTIDS.ordinal()].getValue();
		mode = (Integer) allFields[Columns.MODETRANS.ordinal()].getValue();
		recvPath = (String) allFields[Columns.RECVPATH.ordinal()].getValue();
		sendPath = (String) allFields[Columns.SENDPATH.ordinal()].getValue();
		archivePath = (String) allFields[Columns.ARCHIVEPATH.ordinal()]
				.getValue();
		workPath = (String) allFields[Columns.WORKPATH.ordinal()].getValue();
		rpreTasks = (String) allFields[Columns.RPRETASKS.ordinal()].getValue();
		rpostTasks = (String) allFields[Columns.RPOSTTASKS.ordinal()].getValue();
		rerrorTasks = (String) allFields[Columns.RERRORTASKS.ordinal()]
				.getValue();
		spreTasks = (String) allFields[Columns.SPRETASKS.ordinal()].getValue();
		spostTasks = (String) allFields[Columns.SPOSTTASKS.ordinal()].getValue();
		serrorTasks = (String) allFields[Columns.SERRORTASKS.ordinal()]
				.getValue();
		updatedInfo = (Integer) allFields[Columns.UPDATEDINFO.ordinal()]
				.getValue();
		idRule = (String) allFields[Columns.IDRULE.ordinal()].getValue();</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\localhandler\TransferActions.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/localhandler/TransferActions.html#821">821</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\localhandler\TransferActions.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/localhandler/TransferActions.html#888">888</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>				session.newState(ENDTRANSFERR);
				try {
					session.setFinalizeTransfer(true, result);
				} catch (OpenR66RunnerErrorException e) {
					// TODO
					session.newState(ERROR);
					ErrorPacket error = null;
					if (localChannelReference.getFutureRequest().getResult() != null) {
						result = localChannelReference.getFutureRequest().getResult();
						error = new ErrorPacket(
							&quot;Error while finalizing transfer: &quot;+result.getMessage(),
							result.code.getCode(), ErrorPacket.FORWARDCLOSECODE);
					} else {
						error = new ErrorPacket(
								&quot;Error while finalizing transfer&quot;,
								ErrorCode.FinalOp.getCode(), ErrorPacket.FORWARDCLOSECODE);
					}
					try {
						ChannelUtils.writeAbstractLocalPacket(localChannelReference, error, true);
					} catch (OpenR66ProtocolPacketException e1) {
					}
					session.setStatus(23);
					ChannelCloseTimer.closeFutureChannel(channel);
					return;
				} catch (OpenR66ProtocolSystemException e) {
					// TODO
					session.newState(ERROR);
					ErrorPacket error = null;
					if (localChannelReference.getFutureRequest().getResult() != null) {
						result = localChannelReference.getFutureRequest().getResult();
						error = new ErrorPacket(
							&quot;Error while finalizing transfer: &quot;+result.getMessage(),
							result.code.getCode(), ErrorPacket.FORWARDCLOSECODE);
					} else {
						error = new ErrorPacket(
								&quot;Error while finalizing transfer&quot;,
								ErrorCode.FinalOp.getCode(), ErrorPacket.FORWARDCLOSECODE);
					}
					try {
						ChannelUtils.writeAbstractLocalPacket(localChannelReference, error, true);
					} catch (OpenR66ProtocolPacketException e1) {
					}
					session.setStatus(23);
					ChannelCloseTimer.closeFutureChannel(channel);
					return;
				}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#326">326</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#358">358</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#358">358</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			preparedStatement.realClose();
		}
	}

	public boolean upgradeDb(DbSession session, String version) throws WaarpDatabaseNoConnectionException {
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_13.getVersion())) {
			System.out.println(version+&quot; to &quot;+R66Versions.V2_4_13.getVersion()+&quot;? &quot;+true);
			String createTableH2 = &quot;CREATE TABLE IF NOT EXISTS &quot;;
			String primaryKey = &quot; PRIMARY KEY &quot;;
			String notNull = &quot; NOT NULL &quot;;
	
			// HostConfiguration
			String action = createTableH2 + DbHostConfiguration.table + &quot;(&quot;;
			DbHostConfiguration.Columns[] chcolumns = DbHostConfiguration.Columns
					.values();
			for (int i = 0; i &lt; chcolumns.length - 1; i++) {
				action += chcolumns[i].name() +
						DBType.getType(DbHostConfiguration.dbTypes[i]) + notNull +
						&quot;, &quot;;
			}
			action += chcolumns[chcolumns.length - 1].name() +
					DBType.getType(DbHostConfiguration.dbTypes[chcolumns.length - 1]) +
					primaryKey + &quot;)&quot;;
			System.out.println(action);
			DbRequest request = new DbRequest(session);
			try {
				request.query(action);
			} catch (WaarpDatabaseSqlException e) {
				e.printStackTrace();
				return false;
			} finally {
				request.close();
			}
		}
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_17.getVersion())) {
			System.out.println(version+&quot; to &quot;+R66Versions.V2_4_17.getVersion()+&quot;? &quot;+true);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\adminssl\HttpSslHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/adminssl/HttpSslHandler.html#371">371</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\adminssl\HttpSslHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/adminssl/HttpSslHandler.html#481">481</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			body0 = REQUEST.Listing.readBodyHeader();
			String parm = parms.get(0);
			if (&quot;Filter&quot;.equalsIgnoreCase(parm)) {
				String startid = getTrimValue(&quot;startid&quot;);
				String stopid = getTrimValue(&quot;stopid&quot;);
				if (startid != null &amp;&amp; stopid == null) {
					stopid = Long.MAX_VALUE+&quot;&quot;;
				}
				if (stopid != null &amp;&amp; startid == null) {
                   	startid = (DbConstant.ILLEGALVALUE+1)+&quot;&quot;;
				}
				String start = getValue(&quot;start&quot;);
				String stop = getValue(&quot;stop&quot;);
				String rule = getTrimValue(&quot;rule&quot;);
				String req = getTrimValue(&quot;req&quot;);
				boolean pending, transfer, error, done, all;
				pending = params.containsKey(&quot;pending&quot;);
				transfer = params.containsKey(&quot;transfer&quot;);
				error = params.containsKey(&quot;error&quot;);
				done = params.containsKey(&quot;done&quot;);
				all = params.containsKey(&quot;all&quot;);
				if (pending &amp;&amp; transfer &amp;&amp; error &amp;&amp; done) {
					all = true;
				} else if (!(pending || transfer || error || done)) {
					all = true;
				}
				Timestamp tstart = WaarpStringUtils.fixDate(start);
				if (tstart != null) {
					start = tstart.toString();
				}
				Timestamp tstop = WaarpStringUtils.fixDate(stop, tstart);
				if (tstop != null) {
					stop = tstop.toString();
				}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#2076">2076</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#2162">2162</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	public static boolean setConfigurationServerShutdownFromXml(Configuration config,
			String filename) {
		Document document = null;
		// Open config file
		try {
			document = new SAXReader().read(filename);
		} catch (DocumentException e) {
			logger.error(Messages.getString(&quot;FileBasedConfiguration.CannotReadXml&quot;) + filename, e); //$NON-NLS-1$
			return false;
		}
		if (document == null) {
			logger.error(Messages.getString(&quot;FileBasedConfiguration.CannotReadXml&quot;) + filename); //$NON-NLS-1$
			return false;
		}
		configuration = XmlUtil.read(document, configServer);
		hashConfig = new XmlHash(configuration);
		// Now read the configuration
		loadLocale(config);
		if (!loadIdentity(config)) {
			logger.error(&quot;Cannot load Identity&quot;);
			return false;
		}
		if (!loadDatabase(config)) {
			logger.error(&quot;Cannot load Database configuration&quot;);
			return false;
		}
		if (!loadServerParam(config)) {
			logger.error(&quot;Cannot load Server Parameters&quot;);
			return false;
		}
		if (!loadDirectory(config)) {
			logger.error(&quot;Cannot load Directory configuration&quot;);
			return false;
		}
		if (!loadLimit(config, false)) {
			logger.error(&quot;Cannot load Limit configuration&quot;);
			return false;
		}
		if (config.useSSL) {
			if (!loadSsl(config)) {
				logger.error(&quot;Cannot load SSL configuration&quot;);
				return false;
			}
		}
		if (!loadNetworkServer(config)) {
			logger.error(&quot;Cannot load Network configuration&quot;);
			return false;
		}
		if (!DbConstant.admin.isConnected) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#281">281</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#264">264</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		String action = &quot;ALTER SEQUENCE &quot; + DbTaskRunner.fieldseq +
				&quot; RESTART WITH &quot; + newvalue;
		DbRequest request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			e.printStackTrace();
			return;
		} finally {
			request.close();
		}
		System.out.println(action);
	}

	/*
	 * (non-Javadoc)
	 * @see org.waarp.openr66.databaseold.model.DbModel#nextSequence()
	 */
	@Override
	public long nextSequence(DbSession dbSession)
			throws WaarpDatabaseNoConnectionException,
			WaarpDatabaseSqlException, WaarpDatabaseNoDataException {
		long result = DbConstant.ILLEGALVALUE;
		String action = &quot;SELECT NEXTVAL('&quot; + DbTaskRunner.fieldseq + &quot;')&quot;;
		DbPreparedStatement preparedStatement = new DbPreparedStatement(
				dbSession);
		try {
			preparedStatement.createPrepareStatement(action);
			// Limit the search
			preparedStatement.executeQuery();
			if (preparedStatement.getNext()) {
				try {
					result = preparedStatement.getResultSet().getLong(1);
				} catch (SQLException e) {
					throw new WaarpDatabaseSqlException(e);
				}
				return result;
			} else {
				throw new WaarpDatabaseNoDataException(
						&quot;No sequence found. Must be initialized first&quot;);
			}
		} finally {
			preparedStatement.realClose();
		}
	}

	public boolean upgradeDb(DbSession session, String version) throws WaarpDatabaseNoConnectionException {
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_13.getVersion())) {
			System.out.println(version+&quot; to &quot;+R66Versions.V2_4_13.getVersion()+&quot;? &quot;+true);
			String createTableH2 = &quot;CREATE TABLE IF NOT EXISTS &quot;;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\context\task\ExecMoveTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/ExecMoveTask.html#214">214</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\context\task\ExecOutputTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/ExecOutputTask.html#204">204</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>				futureCompletion.setFailure(e);
				return;
			}
		} catch (IOException e) {
			try {
				outputStream.close();
			} catch (IOException e1) {
			}
			thread.interrupt();
			try {
				inputStream.close();
			} catch (IOException e1) {
			}
			try {
				pumpStreamHandler.stop();
			} catch (IOException e2) {
			}
			logger.error(&quot;IOException: &quot; + e.getMessage() +
					&quot; . Exec in error with &quot; + commandLine.toString());
			futureCompletion.setFailure(e);
			return;
		}
		try {
			outputStream.flush();
		} catch (IOException e) {
		}
		try {
			outputStream.close();
		} catch (IOException e) {
		}
		try {
			pumpStreamHandler.stop();
		} catch (IOException e2) {
		}
		try {
			if (delay &gt; 0) {
				thread.join(delay);
			} else {
				thread.join();
			}
		} catch (InterruptedException e) {
			Thread.currentThread().interrupt();
		}
		try {
			inputStream.close();
		} catch (IOException e1) {
		}
		String newname = null;
		if (defaultExecutor.isFailure(status) &amp;&amp; watchdog != null &amp;&amp;
				watchdog.killedProcess()) {
			// kill by the watchdoc (time out)
			status = -1;
			newname = &quot;TimeOut&quot;;
		} else {
			newname = lastLineReader.lastLine;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#1849">1849</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\data\DbHostConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbHostConfiguration.html#554">554</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		XmlValue value = hashConfig.get(DbHostConfiguration.XML_ROLES);
		if (value != null &amp;&amp; (value.getList() != null)) {
			for (XmlValue[] xml : (List&lt;XmlValue[]&gt;) value.getList()) {
				XmlHash subHash = new XmlHash(xml);
				value = subHash.get(DbHostConfiguration.XML_ROLEID);
				if (value == null || (value.isEmpty())) {
					continue;
				}
				String refHostId = value.getString();
				value = subHash.get(DbHostConfiguration.XML_ROLESET);
				if (value == null || (value.isEmpty())) {
					continue;
				}
				String roleset = value.getString();
				String [] roles = roleset.split(&quot; |\\|&quot;);
				RoleDefault newrole = new RoleDefault();
				for (String role : roles) {
					try {
						RoleDefault.ROLE roletype = RoleDefault.ROLE.valueOf(role.toUpperCase());
						if (roletype == ROLE.NOACCESS) {
							// reset
							newrole.setRole(roletype);
						} else {
							newrole.addRole(roletype);
						}
					} catch (IllegalArgumentException e) {
						// ignore
					}
				}
				logger.info(&quot;New Role: &quot; + refHostId + &quot;:&quot; + newrole);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\DbConfigurationR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbConfigurationR66RestMethodHandler.html#180">180</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\DbHostConfigurationR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbHostConfigurationR66RestMethodHandler.html#199">199</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			node3.put(DbConfiguration.Columns.HOSTID.name(), &quot;HostId as VARCHAR in URI as &quot;+this.path+&quot;/id&quot;); 
			node2 = RestArgument.fillDetailedAllow(METHOD.DELETE, this.path+&quot;/id&quot;, COMMAND_TYPE.DELETE.name(), 
					node3, node1);
			node.add(node2);
		}
		if (this.methods.contains(METHOD.POST)) {
			node3 = JsonHandler.createObjectNode();
			for (DbValue dbValue : values) {
				node3.put(dbValue.column, dbValue.getType());
			}
			node2 = RestArgument.fillDetailedAllow(METHOD.POST, this.path, COMMAND_TYPE.CREATE.name(), 
					node3, node1);
			node.add(node2);
		}
		node2 = RestArgument.fillDetailedAllow(METHOD.OPTIONS, this.path, COMMAND_TYPE.OPTIONS.name(), null, null);
		node.add(node2);

		return node;
	}

	@Override
	public String getPrimaryPropertyName() {
		return Columns.HOSTID.name();
	}

	@Override
	protected void put(HttpRestHandler handler, RestArgument arguments, RestArgument result,
			Object body) throws HttpIncorrectRequestException, HttpInvalidAuthenticationException,
			HttpNotFoundRequestException {
		super.put(handler, arguments, result, body);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#334">334</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#317">317</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			String primaryKey = &quot; PRIMARY KEY &quot;;
			String notNull = &quot; NOT NULL &quot;;
	
			// HostConfiguration
			String action = createTableH2 + DbHostConfiguration.table + &quot;(&quot;;
			DbHostConfiguration.Columns[] chcolumns = DbHostConfiguration.Columns
					.values();
			for (int i = 0; i &lt; chcolumns.length - 1; i++) {
				action += chcolumns[i].name() +
						DBType.getType(DbHostConfiguration.dbTypes[i]) + notNull +
						&quot;, &quot;;
			}
			action += chcolumns[chcolumns.length - 1].name() +
					DBType.getType(DbHostConfiguration.dbTypes[chcolumns.length - 1]) +
					primaryKey + &quot;)&quot;;
			System.out.println(action);
			DbRequest request = new DbRequest(session);
			try {
				request.query(action);
			} catch (WaarpDatabaseSqlException e) {
				e.printStackTrace();
				return false;
			} finally {
				request.close();
			}
		}
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_17.getVersion())) {
			System.out.println(version+&quot; to &quot;+R66Versions.V2_4_17.getVersion()+&quot;? &quot;+true);
			String command = &quot;ALTER TABLE &quot;+DbTaskRunner.table+&quot; ADD COLUMN IF NOT EXISTS &quot;+</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#366">366</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#366">366</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#317">317</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>			String primaryKey = &quot; PRIMARY KEY &quot;;
			String notNull = &quot; NOT NULL &quot;;
	
			// HostConfiguration
			String action = createTableH2 + DbHostConfiguration.table + &quot;(&quot;;
			DbHostConfiguration.Columns[] chcolumns = DbHostConfiguration.Columns
					.values();
			for (int i = 0; i &lt; chcolumns.length - 1; i++) {
				action += chcolumns[i].name() +
						DBType.getType(DbHostConfiguration.dbTypes[i]) + notNull +
						&quot;, &quot;;
			}
			action += chcolumns[chcolumns.length - 1].name() +
					DBType.getType(DbHostConfiguration.dbTypes[chcolumns.length - 1]) +
					primaryKey + &quot;)&quot;;
			System.out.println(action);
			DbRequest request = new DbRequest(session);
			try {
				request.query(action);
			} catch (WaarpDatabaseSqlException e) {
				e.printStackTrace();
				return false;
			} finally {
				request.close();
			}
		}
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_17.getVersion())) {
			System.out.println(version+&quot; to &quot;+R66Versions.V2_4_17.getVersion()+&quot;? &quot;+true);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#1955">1955</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#2007">2007</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>	public static boolean setConfigurationInitDatabase(Configuration config, String filename) {
		Document document = null;
		// Open config file
		try {
			document = new SAXReader().read(filename);
		} catch (DocumentException e) {
			logger.error(Messages.getString(&quot;FileBasedConfiguration.CannotReadXml&quot;) + filename, e); //$NON-NLS-1$
			return false;
		}
		if (document == null) {
			logger.error(Messages.getString(&quot;FileBasedConfiguration.CannotReadXml&quot;) + filename); //$NON-NLS-1$
			return false;
		}
		configuration = XmlUtil.read(document, configServer);
		hashConfig = new XmlHash(configuration);
		loadLocale(config);
		if (!loadIdentity(config)) {
			logger.error(&quot;Cannot load Identity&quot;);
			return false;
		}
		if (!loadDatabase(config)) {
			logger.error(&quot;Cannot load Database configuration&quot;);
			return false;
		}
		if (!loadDirectory(config)) {
			logger.error(&quot;Cannot load Directory configuration&quot;);
			return false;
		}
		if (!loadLimit(config, false)) {
			logger.error(&quot;Cannot load Limit configuration&quot;);
			return false;
		}
		if (!DbConstant.admin.isConnected) {
			// if no database, must load authentication from file
			if (!loadAuthentication(config)) {
				logger.error(&quot;Cannot load Authentication configuration&quot;);
				return false;
			}
		}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\DbConfigurationR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbConfigurationR66RestMethodHandler.html#180">180</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\DbHostAuthR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbHostAuthR66RestMethodHandler.html#186">186</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\DbHostConfigurationR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbHostConfigurationR66RestMethodHandler.html#199">199</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			node3.put(DbConfiguration.Columns.HOSTID.name(), &quot;HostId as VARCHAR in URI as &quot;+this.path+&quot;/id&quot;); 
			node2 = RestArgument.fillDetailedAllow(METHOD.DELETE, this.path+&quot;/id&quot;, COMMAND_TYPE.DELETE.name(), 
					node3, node1);
			node.add(node2);
		}
		if (this.methods.contains(METHOD.POST)) {
			node3 = JsonHandler.createObjectNode();
			for (DbValue dbValue : values) {
				node3.put(dbValue.column, dbValue.getType());
			}
			node2 = RestArgument.fillDetailedAllow(METHOD.POST, this.path, COMMAND_TYPE.CREATE.name(), 
					node3, node1);
			node.add(node2);
		}
		node2 = RestArgument.fillDetailedAllow(METHOD.OPTIONS, this.path, COMMAND_TYPE.OPTIONS.name(), null, null);
		node.add(node2);

		return node;
	}

	@Override
	public String getPrimaryPropertyName() {
		return Columns.HOSTID.name();
	}

	@Override
	protected void put(HttpRestHandler handler, RestArgument arguments, RestArgument result,</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#228">228</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#216">216</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		} finally {
			request.close();
		}
		// Index Runner
		action = &quot;CREATE INDEX IDX_RUNNER ON &quot; + DbTaskRunner.table + &quot;(&quot;;
		DbTaskRunner.Columns[] icolumns = DbTaskRunner.indexes;
		for (int i = 0; i &lt; icolumns.length - 1; i++) {
			action += icolumns[i].name() + &quot;, &quot;;
		}
		action += icolumns[icolumns.length - 1].name() + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// cptrunner
		action = &quot;CREATE SEQUENCE &quot; + DbTaskRunner.fieldseq +
				&quot; MINVALUE &quot; + (DbConstant.ILLEGALVALUE + 1) +
				&quot; START WITH &quot; + (DbConstant.ILLEGALVALUE + 1);
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\client\RequestTransfer.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/RequestTransfer.html#446">446</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\client\RequestTransfer.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/RequestTransfer.html#553">553</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		}

		logger.info(&quot;Try RequestTransfer to &quot;+host.toString());
		SocketAddress socketAddress;
		try {
			socketAddress = host.getSocketAddress();
		} catch (IllegalArgumentException e) {
			logger.debug(&quot;Cannot connect to &quot; + host.toString());
			host = null;
			future.setResult(new R66Result(null, true,
					ErrorCode.ConnectionImpossible, null));
			future.cancel();
			return ErrorCode.ConnectionImpossible;
		}
		boolean isSSL = host.isSsl();

		LocalChannelReference localChannelReference = networkTransaction
				.createConnectionWithRetry(socketAddress, isSSL, future);
		socketAddress = null;
		if (localChannelReference == null) {
			logger.debug(&quot;Cannot connect to &quot; + host.toString());
			host = null;
			future.setResult(new R66Result(null, true,
					ErrorCode.ConnectionImpossible, null));
			future.cancel();
			return ErrorCode.ConnectionImpossible;
		}
		boolean useJson = PartnerConfiguration.useJson(host.getHostid());
		logger.debug(&quot;UseJson: &quot;+useJson);
		AbstractLocalPacket packet = null;
		if (useJson) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\server\ConfigExport.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/server/ConfigExport.html#124">124</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\server\ConfigImport.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/server/ConfigImport.html#160">160</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		}
		SocketAddress socketAddress;
		try {
			socketAddress = dbhost.getSocketAddress();
		} catch (IllegalArgumentException e) {
			logger.error(&quot;Cannot Connect to &quot;+dbhost.getHostid());
			future.setResult(new R66Result(
					new OpenR66ProtocolNoConnectionException(&quot;Cannot connect to server &quot;+dbhost.getHostid()),
					null, true, ErrorCode.ConnectionImpossible, null));
			dbhost = null;
			future.setFailure(future.getResult().exception);
			return;
		}
		boolean isSSL = dbhost.isSsl();

		LocalChannelReference localChannelReference = networkTransaction
				.createConnectionWithRetry(socketAddress, isSSL, future);
		socketAddress = null;
		if (localChannelReference == null) {
			logger.error(&quot;Cannot Connect to &quot;+dbhost.getHostid());
			future.setResult(new R66Result(
					new OpenR66ProtocolNoConnectionException(&quot;Cannot connect to server &quot;+dbhost.getHostid()),
					null, true, ErrorCode.ConnectionImpossible, null));
			dbhost = null;
			future.setFailure(future.getResult().exception);
			return;
		}
		localChannelReference.sessionNewState(R66FiniteDualStates.VALIDOTHER);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\client\RequestTransfer.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/RequestTransfer.html#508">508</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\client\RequestTransfer.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/RequestTransfer.html#594">594</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		}
		localChannelReference.sessionNewState(R66FiniteDualStates.VALIDOTHER);
		try {
			ChannelUtils.writeAbstractLocalPacket(localChannelReference, packet, false);
		} catch (OpenR66ProtocolPacketException e) {
			logger.error(Messages.getString(&quot;RequestTransfer.63&quot;) + host.toString()); //$NON-NLS-1$
			Channels.close(localChannelReference.getLocalChannel());
			localChannelReference = null;
			host = null;
			packet = null;
			logger.debug(&quot;Bad Protocol&quot;, e);
			future.setResult(new R66Result(e, null, true,
					ErrorCode.TransferError, null));
			future.setFailure(e);
			return ErrorCode.Internal;
		}
		packet = null;
		host = null;
		future.awaitUninterruptibly();

		Channels.close(localChannelReference.getLocalChannel());
		localChannelReference = null;

		logger.info(&quot;Request done with &quot; + (future.isSuccess() ? &quot;success&quot; : &quot;error&quot;));
		R66Result result = future.getResult();
		if (result != null) {
			return result.code;
		}
		return ErrorCode.Internal;
	}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\server\LogExport.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/server/LogExport.html#174">174</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\server\LogExtendedExport.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/server/LogExtendedExport.html#315">315</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	protected static boolean getParams(String[] args) {
		if (args.length &lt; 1) {
			logger.error(_INFO_ARGS);
			return false;
		}
		if (!FileBasedConfiguration
				.setClientConfigurationFromXml(Configuration.configuration, args[0])) {
			logger.error(_INFO_ARGS);
			return false;
		}
		String ssstart = null;
		String ssstop = null;
		for (int i = 1; i &lt; args.length; i++) {
			if (args[i].equalsIgnoreCase(&quot;-purge&quot;)) {
				spurgeLog = true;
			} else if (args[i].equalsIgnoreCase(&quot;-clean&quot;)) {
				sclean = true;
			} else if (args[i].equalsIgnoreCase(&quot;-start&quot;)) {
				i++;
				ssstart = args[i];
			} else if (args[i].equalsIgnoreCase(&quot;-stop&quot;)) {
				i++;
				ssstop = args[i];
			} else if (args[i].equalsIgnoreCase(&quot;-host&quot;)) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\DbConfigurationR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbConfigurationR66RestMethodHandler.html#180">180</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\DbHostAuthR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbHostAuthR66RestMethodHandler.html#186">186</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\DbHostConfigurationR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbHostConfigurationR66RestMethodHandler.html#199">199</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\DbRuleR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbRuleR66RestMethodHandler.html#180">180</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			node3.put(DbConfiguration.Columns.HOSTID.name(), &quot;HostId as VARCHAR in URI as &quot;+this.path+&quot;/id&quot;); 
			node2 = RestArgument.fillDetailedAllow(METHOD.DELETE, this.path+&quot;/id&quot;, COMMAND_TYPE.DELETE.name(), 
					node3, node1);
			node.add(node2);
		}
		if (this.methods.contains(METHOD.POST)) {
			node3 = JsonHandler.createObjectNode();
			for (DbValue dbValue : values) {
				node3.put(dbValue.column, dbValue.getType());
			}
			node2 = RestArgument.fillDetailedAllow(METHOD.POST, this.path, COMMAND_TYPE.CREATE.name(), 
					node3, node1);
			node.add(node2);
		}
		node2 = RestArgument.fillDetailedAllow(METHOD.OPTIONS, this.path, COMMAND_TYPE.OPTIONS.name(), null, null);
		node.add(node2);

		return node;
	}

	@Override
	public String getPrimaryPropertyName() {
		return Columns.HOSTID.name();</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\server\ConfigExport.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/server/ConfigExport.html#257">257</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\server\ConfigImport.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/server/ConfigImport.html#386">386</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>					logger.error(&quot;COnfigExport in     FAILURE since Host is not found: &quot;+stohost, e);
					networkTransaction.closeAll();
					System.exit(10);
				}
			} else {
				stohost = Configuration.configuration.HOST_SSLID;
			}
			transaction.run();
			future.awaitUninterruptibly();
			long time2 = System.currentTimeMillis();
			long delay = time2 - time1;
			R66Result result = future.getResult();
			if (future.isSuccess()) {
				boolean useJson = PartnerConfiguration.useJson(stohost);
				logger.debug(&quot;UseJson: &quot;+useJson);
				String message = null;
				if (useJson) {
					message = (result.other != null ? ((JsonCommandPacket) result.other).getRequest() :
							&quot;no file&quot;);
				} else {
					message = (result.other != null ? ((ValidPacket) result.other).getSheader() :
							&quot;no file&quot;);
				}
				if (result.code == ErrorCode.Warning) {
					logger.warn(&quot;WARNED on files:     &quot; +</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\DbConfigurationR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbConfigurationR66RestMethodHandler.html#180">180</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\DbHostAuthR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbHostAuthR66RestMethodHandler.html#186">186</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\DbHostConfigurationR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbHostConfigurationR66RestMethodHandler.html#199">199</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\DbRuleR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbRuleR66RestMethodHandler.html#180">180</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\DbTaskRunnerR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbTaskRunnerR66RestMethodHandler.html#258">258</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>			node3.put(DbConfiguration.Columns.HOSTID.name(), &quot;HostId as VARCHAR in URI as &quot;+this.path+&quot;/id&quot;); 
			node2 = RestArgument.fillDetailedAllow(METHOD.DELETE, this.path+&quot;/id&quot;, COMMAND_TYPE.DELETE.name(), 
					node3, node1);
			node.add(node2);
		}
		if (this.methods.contains(METHOD.POST)) {
			node3 = JsonHandler.createObjectNode();
			for (DbValue dbValue : values) {
				node3.put(dbValue.column, dbValue.getType());
			}
			node2 = RestArgument.fillDetailedAllow(METHOD.POST, this.path, COMMAND_TYPE.CREATE.name(), 
					node3, node1);
			node.add(node2);
		}
		node2 = RestArgument.fillDetailedAllow(METHOD.OPTIONS, this.path, COMMAND_TYPE.OPTIONS.name(), null, null);
		node.add(node2);

		return node;
	}

	@Override
	public String getPrimaryPropertyName() {
		return Columns.HOSTID.name();</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\data\DbHostConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbHostConfiguration.html#865">865</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\data\DbHostConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbHostConfiguration.html#961">961</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>	private boolean updateSet(String source, String path, HashSet&lt;String&gt; set) {
		if (source != null &amp;&amp; ! source.isEmpty()) {
			Document document = null;
			StringReader reader = null;
			if (source != null &amp;&amp; ! source.isEmpty()) {
				try {
					reader = new StringReader(source);
					document = new SAXReader().read(reader);
				} catch (DocumentException e) {
					logger.error(&quot;Unable to read the XML Config &quot;+path+&quot; string: &quot; + source, e);
					if (reader != null) {
						reader.close();
					}
					return false;
				}
				if (document == null) {
					logger.error(&quot;Unable to read the XML Config &quot;+path+&quot; string: &quot; + source);
					if (reader != null) {
						reader.close();
					}
					return false;
				}
				@SuppressWarnings(&quot;unchecked&quot;)
				List&lt;Element&gt; list = document.selectNodes(path);
				for (Element element : list) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\server\LogExport.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/server/LogExport.html#136">136</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\server\LogExtendedExport.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/server/LogExtendedExport.html#202">202</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>				.createConnectionWithRetry(socketAddress, isSSL, future);
		socketAddress = null;
		if (localChannelReference == null) {
			logger.error(&quot;Cannot Connect to &quot;+host.getHostid());
			future.setResult(new R66Result(
					new OpenR66ProtocolNoConnectionException(&quot;Cannot connect to server &quot;+host.getHostid()),
					null, true, ErrorCode.ConnectionImpossible, null));
			host = null;
			future.setFailure(future.getResult().exception);
			return;
		}
		localChannelReference.sessionNewState(R66FiniteDualStates.VALIDOTHER);
		try {
			ChannelUtils.writeAbstractLocalPacket(localChannelReference, valid, false);
		} catch (OpenR66ProtocolPacketException e) {
			logger.error(&quot;Bad Protocol&quot;, e);
			Channels.close(localChannelReference.getLocalChannel());
			localChannelReference = null;
			host = null;
			valid = null;
			future.setResult(new R66Result(e, null, true,
					ErrorCode.TransferError, null));
			future.setFailure(e);
			return;
		}
		host = null;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\data\DbTaskRunner.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbTaskRunner.html#2016">2016</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\data\DbTaskRunner.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbTaskRunner.html#2056">2056</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>			DbSession session, boolean in)
			throws WaarpDatabaseNoConnectionException, WaarpDatabaseSqlException {
		String request = &quot;SELECT COUNT(&quot; + Columns.SPECIALID.name() + &quot;) FROM &quot; + table;
		String requesterd;
		String from = Configuration.configuration.HOST_ID;
		String sfrom = Configuration.configuration.HOST_SSLID;
		if (in) {
			requesterd = Columns.REQUESTED.name();
		} else {
			requesterd = Columns.REQUESTER.name();
		}
		if (from != null &amp; sfrom != null) {
			request += &quot; WHERE ((&quot; + requesterd + &quot; = '&quot; +
					from + &quot;' OR &quot; + requesterd + &quot; = '&quot; + sfrom + &quot;') &quot;;
		} else if (from != null) {
			request += &quot; WHERE (&quot; + requesterd + &quot; = '&quot; + from + &quot;' &quot;;
		} else {
			request += &quot; WHERE (&quot; + requesterd + &quot; = '&quot; + sfrom + &quot;' &quot;;
		}
		request += &quot; AND &quot; + getLimitWhereCondition() + &quot;) &quot;;
		request += &quot; AND &quot; + Columns.STARTTRANS.name() + &quot; &gt;= ? &quot;;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#139">139</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#142">142</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#142">142</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#146">146</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#135">135</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		System.out.println(action);
		request = new DbRequest(session);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			// XXX FIX no return;
		} finally {
			request.close();
		}
				
		// hosts
		action = createTableH2 + DbHostAuth.table + &quot;(&quot;;
		DbHostAuth.Columns[] hcolumns = DbHostAuth.Columns.values();
		for (int i = 0; i &lt; hcolumns.length - 1; i++) {
			action += hcolumns[i].name() +
					DBType.getType(DbHostAuth.dbTypes[i]) + notNull + &quot;, &quot;;
		}
		action += hcolumns[hcolumns.length - 1].name() +
				DBType.getType(DbHostAuth.dbTypes[hcolumns.length - 1]) +</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\configuration\PartnerConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/configuration/PartnerConfiguration.html#247">247</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\configuration\PartnerConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/configuration/PartnerConfiguration.html#276">276</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	public final static boolean isVersion2GEQVersion1(String version1, String version2) {
		if (version1 == null || version2 == null) {
			return false;
		}
		int major1 = 0;
		int rank1 = 0;
		int subversion1 = 0;
		String [] vals = version1.split(&quot;\\.&quot;);
		major1 = Integer.parseInt(vals[0]);
		rank1 = Integer.parseInt(vals[1]);
		subversion1 = Integer.parseInt(vals[2]);
		int major2 = 0;
		int rank2 = 0;
		int subversion2 = 0;
		vals = version2.split(&quot;\\.&quot;);
		major2 = Integer.parseInt(vals[0]);
		rank2 = Integer.parseInt(vals[1]);
		subversion2 = Integer.parseInt(vals[2]);
		logger.debug(&quot;1: &quot;+major1+&quot;:&quot;+rank1+&quot;:&quot;+subversion1+&quot; &lt;=? &quot;+major2+&quot;:&quot;+rank2+&quot;:&quot;+subversion2+ &quot; = &quot;+</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#1806">1806</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\data\DbHostConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbHostConfiguration.html#532">532</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		XmlValue value = hashConfig.get(DbHostConfiguration.XML_ALIASES);
		if (value != null &amp;&amp; (value.getList() != null)) {
			for (XmlValue[] xml : (List&lt;XmlValue[]&gt;) value.getList()) {
				XmlHash subHash = new XmlHash(xml);
				value = subHash.get(DbHostConfiguration.XML_REALID);
				if (value == null || (value.isEmpty())) {
					continue;
				}
				String refHostId = value.getString();
				value = subHash.get(DbHostConfiguration.XML_ALIASID);
				if (value == null || (value.isEmpty())) {
					continue;
				}
				String aliasset = value.getString();
				String [] alias = aliasset.split(&quot; |\\|&quot;);
				for (String namealias : alias) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\adminssl\HttpSslHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/adminssl/HttpSslHandler.html#724">724</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\adminssl\HttpSslHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/adminssl/HttpSslHandler.html#765">765</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>					body = REQUEST.CancelRestart.readBody();
					body = taskRunner.toSpecializedHtml(authentHttp, body,
							lcr != null ? Messages.getString(&quot;HttpSslHandler.Active&quot;) : Messages.getString(&quot;HttpSslHandler.NotActive&quot;)); //$NON-NLS-1$ //$NON-NLS-2$
					String tstart = taskRunner.getStart().toString();
					tstart = tstart.substring(0, tstart.length());
					String tstop = taskRunner.getStop().toString();
					tstop = tstop.substring(0, tstop.length());
					head = resetOptionTransfer(head, (taskRunner.getSpecialId() - 1) + &quot;&quot;,
							(taskRunner.getSpecialId() + 1) + &quot;&quot;, tstart, tstop,
							taskRunner.getRuleId(), taskRunner.getRequested(),
							false, false, false, false, true);
				}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\HttpRestLogR66Handler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/HttpRestLogR66Handler.html#90">90</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\localhandler\ServerActions.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/localhandler/ServerActions.html#891">891</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>				LogJsonPacket node = (LogJsonPacket) json;
				boolean purge = node.isPurge();
				boolean clean = node.isClean();
				Timestamp start = (node.getStart() == null) ? null :
					new Timestamp(node.getStart().getTime());
				Timestamp stop = (node.getStop() == null) ? null :
					new Timestamp(node.getStop().getTime());
				String startid = node.getStartid();
				String stopid = node.getStopid();
				String rule = node.getRule();
				String request = node.getRequest();
				boolean pending = node.isStatuspending();
				boolean transfer = node.isStatustransfer();
				boolean done = node.isStatusdone();
				boolean error = node.isStatuserror();
				boolean isPurge = purge;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\context\filesystem\R66File.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/filesystem/R66File.html#495">495</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\context\filesystem\R66File.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/filesystem/R66File.html#559">559</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			File newFile = getFileFromPath(path);
			if (newFile.getParentFile().canWrite()) {
				if (!file.renameTo(newFile)) {
					FileOutputStream fileOutputStream = null;
					try {
						try {
							fileOutputStream = new FileOutputStream(newFile);
						} catch (FileNotFoundException e) {
							logger
									.warn(&quot;Cannot find file: &quot; + newFile.getName(),
											e);
							return false;
						}
						FileChannel fileChannelOut = fileOutputStream.getChannel();
						if (get(fileChannelOut)) {
							delete();
						} else {
							try {
								fileChannelOut.close();
							} catch (IOException e) {
							}
							logger.error(&quot;Cannot write file: {}&quot;, newFile);
							return false;
						}
					} finally {
						if (fileOutputStream != null) {
							try {
								fileOutputStream.close();
							} catch (IOException e) {
							}
						}
					}
				}
				currentFile = getRelativePath(newFile);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\HttpRestBandwidthR66Handler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/HttpRestBandwidthR66Handler.html#61">61</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\HttpRestConfigR66Handler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/HttpRestConfigR66Handler.html#65">65</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	public HttpRestBandwidthR66Handler(RestConfiguration config, METHOD ... methods) {
		super(BASEURI, config, METHOD.OPTIONS);
		setIntersectionMethods(methods, METHOD.GET, METHOD.PUT);
	}
	
	@Override
	public void endParsingRequest(HttpRestHandler handler, RestArgument arguments, RestArgument result, Object body)
			throws HttpIncorrectRequestException, HttpInvalidAuthenticationException {
		logger.debug(&quot;debug: {} ### {}&quot;,arguments,result);
		if (body != null) {
			logger.debug(&quot;Obj: {}&quot;, body);
		}
		handler.setWillClose(false);
		ServerActions serverHandler = ((HttpRestR66Handler) handler).serverHandler;
		// now action according to body
		JsonPacket json = (JsonPacket) body;
		if (json == null) {
			result.setDetail(&quot;not enough information&quot;);
			setError(handler, result, HttpResponseStatus.BAD_REQUEST);
			return;
		}
		result.getAnswer().put(AbstractDbData.JSON_MODEL, RESTHANDLERS.Bandwidth.name());</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\RuleFileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/RuleFileBasedConfiguration.html#534">534</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\configuration\RuleFileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/RuleFileBasedConfiguration.html#551">551</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\RuleFileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/RuleFileBasedConfiguration.html#568">568</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\configuration\RuleFileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/RuleFileBasedConfiguration.html#600">600</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		if (array != null) {
			for (rank = 0; rank &lt; array.length; rank++) {
				Element task = new DefaultElement(XTASK);
				task.add(newElement(DbRule.TASK_TYPE, array[rank][0]));
				task.add(newElement(DbRule.TASK_PATH, array[rank][1]));
				task.add(newElement(DbRule.TASK_DELAY, array[rank][2]));
				if (array[rank].length &gt; 3) {
					task.add(newElement(DbRule.TASK_COMMENT, array[rank][3]));
				}
				roottasks.add(task);
			}
		}
		tasks.add(roottasks);
		root.add(tasks);
		tasks = new DefaultElement(XRPOSTTASKS);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\HttpRestInformationR66Handler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/HttpRestInformationR66Handler.html#65">65</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\HttpRestLogR66Handler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/HttpRestLogR66Handler.html#65">65</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	public HttpRestInformationR66Handler(RestConfiguration config, METHOD ... methods) {
		super(BASEURI, config, METHOD.OPTIONS);
		setIntersectionMethods(methods, METHOD.GET);
	}

	@Override
	public void endParsingRequest(HttpRestHandler handler, RestArgument arguments, RestArgument result, Object body)
			throws HttpIncorrectRequestException, HttpInvalidAuthenticationException {
		logger.debug(&quot;debug: {} ### {}&quot;,arguments,result);
		if (body != null) {
			logger.debug(&quot;Obj: {}&quot;, body);
		}
		handler.setWillClose(false);
		ServerActions serverHandler = ((HttpRestR66Handler) handler).serverHandler;
		// now action according to body
		JsonPacket json = (JsonPacket) body;
		if (json == null) {
			result.setDetail(&quot;not enough information&quot;);
			setError(handler, result, HttpResponseStatus.BAD_REQUEST);
			return;
		}
		result.getAnswer().put(AbstractDbData.JSON_MODEL, RESTHANDLERS.Information.name());</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\RuleFileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/RuleFileBasedConfiguration.html#534">534</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\configuration\RuleFileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/RuleFileBasedConfiguration.html#551">551</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\RuleFileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/RuleFileBasedConfiguration.html#568">568</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\configuration\RuleFileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/RuleFileBasedConfiguration.html#600">600</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\RuleFileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/RuleFileBasedConfiguration.html#617">617</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>		if (array != null) {
			for (rank = 0; rank &lt; array.length; rank++) {
				Element task = new DefaultElement(XTASK);
				task.add(newElement(DbRule.TASK_TYPE, array[rank][0]));
				task.add(newElement(DbRule.TASK_PATH, array[rank][1]));
				task.add(newElement(DbRule.TASK_DELAY, array[rank][2]));
				if (array[rank].length &gt; 3) {
					task.add(newElement(DbRule.TASK_COMMENT, array[rank][3]));
				}
				roottasks.add(task);
			}
		}
		tasks.add(roottasks);
		root.add(tasks);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#305">305</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#291">291</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>		DbPreparedStatement preparedStatement = new DbPreparedStatement(
				dbSession);
		try {
			preparedStatement.createPrepareStatement(action);
			// Limit the search
			preparedStatement.executeQuery();
			if (preparedStatement.getNext()) {
				try {
					result = preparedStatement.getResultSet().getLong(1);
				} catch (SQLException e) {
					throw new WaarpDatabaseSqlException(e);
				}
				return result;
			} else {
				throw new WaarpDatabaseNoDataException(
						&quot;No sequence found. Must be initialized first&quot;);
			}
		} finally {
			preparedStatement.realClose();
		}
	}

	public boolean upgradeDb(DbSession session, String version) throws WaarpDatabaseNoConnectionException {
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_13.getVersion())) {
			System.out.println(version+&quot; to &quot;+R66Versions.V2_4_13.getVersion()+&quot;? &quot;+true);
			String createTableH2 = &quot;CREATE TABLE &quot;;
			String constraint = &quot; CONSTRAINT &quot;;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#308">308</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#305">305</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>		DbPreparedStatement preparedStatement = new DbPreparedStatement(
				dbSession);
		try {
			preparedStatement.createPrepareStatement(action);
			// Limit the search
			preparedStatement.executeQuery();
			if (preparedStatement.getNext()) {
				try {
					result = preparedStatement.getResultSet().getLong(1);
				} catch (SQLException e) {
					throw new WaarpDatabaseSqlException(e);
				}
				return result;
			} else {
				throw new WaarpDatabaseNoDataException(
						&quot;No sequence found. Must be initialized first&quot;);
			}
		} finally {
			preparedStatement.realClose();
		}
	}

	public boolean upgradeDb(DbSession session, String version) throws WaarpDatabaseNoConnectionException {
		if (PartnerConfiguration.isVersion2GEQVersion1(version, R66Versions.V2_4_13.getVersion())) {
			System.out.println(version+&quot; to &quot;+R66Versions.V2_4_13.getVersion()+&quot;? &quot;+true);
			String createTableH2 = &quot;CREATE TABLE IF NOT EXISTS &quot;;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\adminssl\HttpSslHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/adminssl/HttpSslHandler.html#2146">2146</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\HttpFormattedHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/HttpFormattedHandler.html#745">745</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>					} else if (cookie.getName().equalsIgnoreCase(I18NEXT)) {
						i18nextFound = true;
						cookie.setValue(lang);
						cookieEncoder.addCookie(cookie);
						response.headers().add(HttpHeaders.Names.SET_COOKIE, cookieEncoder.encode());
						cookieEncoder = new CookieEncoder(true);
					} else {
						cookieEncoder.addCookie(cookie);
						response.headers().add(HttpHeaders.Names.SET_COOKIE, cookieEncoder.encode());
						cookieEncoder = new CookieEncoder(true);
					}
				}
				if (! i18nextFound) {
					Cookie cookie = new DefaultCookie(I18NEXT, lang);
					cookieEncoder.addCookie(cookie);
					response.headers().add(HttpHeaders.Names.SET_COOKIE, cookieEncoder.encode());</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\context\task\ExecMoveTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/ExecMoveTask.html#96">96</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\context\task\ExecOutputTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/ExecOutputTask.html#102">102</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\context\task\ExecTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/ExecTask.html#83">83</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>				move(result.status, result.result, finalname);
				localExecClient.disconnect();
				return;
			} // else continue
		}
		String[] args = finalname.split(&quot; &quot;);
		File exec = new File(args[0]);
		if (exec.isAbsolute()) {
			if (!exec.canExecute()) {
				logger.error(&quot;Exec command is not executable: &quot; + finalname);
				R66Result result = new R66Result(session, false,
						ErrorCode.CommandNotFound, session.getRunner());
				futureCompletion.setResult(result);
				futureCompletion.cancel();
				return;
			}
		}
		CommandLine commandLine = new CommandLine(args[0]);
		for (int i = 1; i &lt; args.length; i++) {
			commandLine.addArgument(args[i]);
		}
		DefaultExecutor defaultExecutor = new DefaultExecutor();</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\adminssl\HttpSslHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/adminssl/HttpSslHandler.html#1043">1043</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\adminssl\HttpSslHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/adminssl/HttpSslHandler.html#1079">1079</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			} else if (&quot;TestConn&quot;.equalsIgnoreCase(parm)) {
				String host = getTrimValue(&quot;host&quot;);
				if (host == null || host.isEmpty()) {
					body0 = body1 = body = &quot;&quot;;
					body = Messages.getString(&quot;HttpSslHandler.17&quot;); //$NON-NLS-1$
					head = resetOptionHosts(head, &quot;&quot;, &quot;&quot;, false, true);
					return head + body0 + body + body1 + end;
				}
				DbHostAuth dbhost;
				try {
					dbhost = new DbHostAuth(dbSession, host);
				} catch (WaarpDatabaseException e) {
					body0 = body1 = body = &quot;&quot;;
					body = Messages.getString(&quot;HttpSslHandler.17&quot;) + e.getMessage() //$NON-NLS-1$
							+ &quot;&lt;/b&gt;&lt;/center&gt;&lt;/p&gt;&quot;;
					head = resetOptionHosts(head, &quot;&quot;, &quot;&quot;, false, true);
					return head + body0 + body + body1 + end;
				}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\gateway\kernel\exec\JavaExecutorWaarpFtp4jClient.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/gateway/kernel/exec/JavaExecutorWaarpFtp4jClient.html#238">238</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\context\task\FtpTransferTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/FtpTransferTask.html#257">257</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>				logger.error(ftpClient.getResult());
				return;
			}
			if (digest &gt; 0) {
				// digest check
				String params = null;
				DigestAlgo algo = null;
				switch (digest) {
					case 1: // CRC
						params = &quot;XCRC &quot;;
						algo = DigestAlgo.CRC32;
						break;
					case 2: // MD5
						params = &quot;XMD5 &quot;;
						algo = DigestAlgo.MD5;
						break;
					case 3: // SHA1
					default:
						params = &quot;XSHA1 &quot;;
						algo = DigestAlgo.SHA1;
						break;
				}
				params += filename;
				String[] values = ftpClient.executeCommand(params);
				String hashresult = null;
				if (values != null) {
					values = values[0].split(&quot; &quot;);
					hashresult = (values.length &gt; 3 ? values[1] : values[0]);
				}
				if (hashresult == null) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#1955">1955</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#2007">2007</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#2076">2076</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#2162">2162</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	public static boolean setConfigurationInitDatabase(Configuration config, String filename) {
		Document document = null;
		// Open config file
		try {
			document = new SAXReader().read(filename);
		} catch (DocumentException e) {
			logger.error(Messages.getString(&quot;FileBasedConfiguration.CannotReadXml&quot;) + filename, e); //$NON-NLS-1$
			return false;
		}
		if (document == null) {
			logger.error(Messages.getString(&quot;FileBasedConfiguration.CannotReadXml&quot;) + filename); //$NON-NLS-1$
			return false;
		}
		configuration = XmlUtil.read(document, configServer);
		hashConfig = new XmlHash(configuration);
		loadLocale(config);
		if (!loadIdentity(config)) {
			logger.error(&quot;Cannot load Identity&quot;);
			return false;
		}
		if (!loadDatabase(config)) {
			logger.error(&quot;Cannot load Database configuration&quot;);
			return false;
		}
		if (!loadDirectory(config)) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#133">133</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#336">336</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		action = createTableH2 + DbHostConfiguration.table + &quot;(&quot;;
		DbHostConfiguration.Columns[] chcolumns = DbHostConfiguration.Columns
				.values();
		for (int i = 0; i &lt; chcolumns.length - 1; i++) {
			action += chcolumns[i].name() +
					DBType.getType(DbHostConfiguration.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += chcolumns[chcolumns.length - 1].name() +
				DBType.getType(DbHostConfiguration.dbTypes[chcolumns.length - 1]) +
				notNull + &quot;,&quot;;
		action += constraint + &quot; hostconf_pk &quot; + primaryKey + &quot;(&quot;
				+ chcolumns[chcolumns.length - 1].name() + &quot;))&quot;;
		System.out.println(action);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\client\DirectTransfer.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/DirectTransfer.html#202">202</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\client\MultipleDirectTransfer.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/MultipleDirectTransfer.html#219">219</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>					networkTransaction.closeAll();
					System.exit(ErrorCode.Unknown.ordinal());
				}
				if (result.runner.getErrorInfo() == ErrorCode.Warning) {
					outputFormat.setValue(FIELDS.status.name(), 1);
					outputFormat.setValue(FIELDS.statusTxt.name(), Messages.getString(&quot;Transfer.Status&quot;)+Messages.getString(&quot;RequestInformation.Warned&quot;)); //$NON-NLS-1$
				} else {
					outputFormat.setValue(FIELDS.status.name(), 2);
					outputFormat.setValue(FIELDS.statusTxt.name(), Messages.getString(&quot;Transfer.Status&quot;)+Messages.getString(&quot;RequestInformation.Failure&quot;)); //$NON-NLS-1$
				}
				outputFormat.setValue(FIELDS.remote.name(), rhost);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#2121">2121</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#2214">2214</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			logger.error(&quot;Cannot load Network configuration&quot;);
			return false;
		}
		if (!DbConstant.admin.isConnected) {
			// if no database, must load authentication from file
			if (!loadAuthentication(config)) {
				logger.error(&quot;Cannot load Authentication configuration&quot;);
				return false;
			}
		}
		config.HOST_AUTH = R66Auth.getServerAuth(
				DbConstant.admin.session, config.HOST_ID);
		if (config.HOST_AUTH == null &amp;&amp;
				config.useNOSSL) {
			logger.error(&quot;Cannot find Authentication for current host&quot;);
			return false;
		}
		if (config.HOST_SSLID != null) {
			config.HOST_SSLAUTH = R66Auth.getServerAuth(
					DbConstant.admin.session,
					config.HOST_SSLID);
			if (config.HOST_SSLAUTH == null &amp;&amp;
					config.useSSL) {
				logger.error(&quot;Cannot find SSL Authentication for current host&quot;);
				return false;
			}
		}
		loadBusinessWhiteList(config);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\DbConfigurationR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbConfigurationR66RestMethodHandler.html#153">153</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\DbHostAuthR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbHostAuthR66RestMethodHandler.html#160">160</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\DbHostConfigurationR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbHostConfigurationR66RestMethodHandler.html#172">172</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>					JsonHandler.createObjectNode().put(DbConfiguration.Columns.HOSTID.name(), &quot;HostId as VARCHAR in URI as &quot;+this.path+&quot;/id&quot;),
					node1);
			node.add(node2);

			node3 = JsonHandler.createObjectNode();
			for (FILTER_ARGS arg : FILTER_ARGS.values()) {
				node3.put(arg.name(), arg.type);
			}
			node2 = RestArgument.fillDetailedAllow(METHOD.GET, this.path, COMMAND_TYPE.MULTIGET.name(), 
					node3, JsonHandler.createArrayNode().add(node1));
			node.add(node2);
		}
		if (this.methods.contains(METHOD.PUT)) {
			node3 = JsonHandler.createObjectNode();
			node3.put(DbConfiguration.Columns.HOSTID.name(), &quot;HostId as VARCHAR in URI as &quot;+this.path+&quot;/id&quot;);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#2036">2036</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#2121">2121</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#2214">2214</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			logger.error(&quot;Cannot load Limit configuration&quot;);
			return false;
		}
		if (!DbConstant.admin.isConnected) {
			// if no database, must load authentication from file
			if (!loadAuthentication(config)) {
				logger.error(&quot;Cannot load Authentication configuration&quot;);
				return false;
			}
		}
		config.HOST_AUTH = R66Auth.getServerAuth(
				DbConstant.admin.session, config.HOST_ID);
		if (config.HOST_AUTH == null &amp;&amp;
				config.useNOSSL) {
			logger.error(&quot;Cannot find Authentication for current host&quot;);
			return false;
		}
		if (config.HOST_SSLID != null) {
			config.HOST_SSLAUTH = R66Auth.getServerAuth(
					DbConstant.admin.session,
					config.HOST_SSLID);
			if (config.HOST_SSLAUTH == null &amp;&amp;
					config.useSSL) {
				logger.error(&quot;Cannot find SSL Authentication for current host&quot;);
				return false;
			}
		}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\HttpRestBusinessR66Handler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/HttpRestBusinessR66Handler.html#69">69</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\HttpRestControlR66Handler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/HttpRestControlR66Handler.html#78">78</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		setIntersectionMethods(methods, METHOD.GET);
	}
	
	@Override
	public void endParsingRequest(HttpRestHandler handler, RestArgument arguments, RestArgument result, Object body)
			throws HttpIncorrectRequestException, HttpInvalidAuthenticationException {
		logger.debug(&quot;debug: {} ### {}&quot;,arguments,result);
		if (body != null) {
			logger.debug(&quot;Obj: {}&quot;, body);
		}
		handler.setWillClose(false);
		ServerActions serverHandler = ((HttpRestR66Handler) handler).serverHandler;
		R66Session session = serverHandler.getSession();
		// now action according to body
		JsonPacket json = (JsonPacket) body;
		if (json == null) {
			result.setDetail(&quot;not enough information&quot;);
			setError(handler, result, HttpResponseStatus.BAD_REQUEST);
			return;
		}
		result.getAnswer().put(AbstractDbData.JSON_MODEL, RESTHANDLERS.Business.name());</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\client\DirectTransfer.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/DirectTransfer.html#162">162</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\client\MultipleDirectTransfer.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/MultipleDirectTransfer.html#182">182</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			OutputFormat outputFormat = new OutputFormat(DirectTransfer.class.getSimpleName(), args);
			if (future.isSuccess()) {
				if (result.runner.getErrorInfo() == ErrorCode.Warning) {
					outputFormat.setValue(FIELDS.status.name(), 1);
					outputFormat.setValue(FIELDS.statusTxt.name(), Messages.getString(&quot;Transfer.Status&quot;)+Messages.getString(&quot;RequestInformation.Warned&quot;)); //$NON-NLS-1$
				} else {
					outputFormat.setValue(FIELDS.status.name(), 0);
					outputFormat.setValue(FIELDS.statusTxt.name(), Messages.getString(&quot;Transfer.Status&quot;)+Messages.getString(&quot;RequestInformation.Success&quot;)); //$NON-NLS-1$
				}
				outputFormat.setValue(FIELDS.remote.name(), rhost);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#223">223</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#223">223</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#228">228</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>		} finally {
			request.close();
		}
		// Index Runner
		action = &quot;CREATE INDEX IDX_RUNNER ON &quot; + DbTaskRunner.table + &quot;(&quot;;
		DbTaskRunner.Columns[] icolumns = DbTaskRunner.indexes;
		for (int i = 0; i &lt; icolumns.length - 1; i++) {
			action += icolumns[i].name() + &quot;, &quot;;
		}
		action += icolumns[icolumns.length - 1].name() + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// cptrunner
		/*
		 * # Table to handle any number of sequences: CREATE TABLE Sequences ( name VARCHAR(22) NOT
		 * NULL, seq INT UNSIGNED NOT NULL, # (or BIGINT) PRIMARY KEY name ); # Create a Sequence:
		 * INSERT INTO Sequences (name, seq) VALUES (?, 0); # Drop a Sequence: DELETE FROM Sequences
		 * WHERE name = ?; # Get a sequence number: UPDATE Sequences SET seq = LAST_INSERT_ID(seq +
		 * 1) WHERE name = ?; $seq = $db-&gt;LastInsertId();
		 */
		action = &quot;CREATE TABLE Sequences (name VARCHAR(22) NOT NULL PRIMARY KEY,&quot; +</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\localhandler\TransferActions.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/localhandler/TransferActions.html#824">824</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\localhandler\TransferActions.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/localhandler/TransferActions.html#845">845</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\localhandler\TransferActions.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/localhandler/TransferActions.html#891">891</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\localhandler\TransferActions.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/localhandler/TransferActions.html#912">912</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>				} catch (OpenR66RunnerErrorException e) {
					// TODO
					session.newState(ERROR);
					ErrorPacket error = null;
					if (localChannelReference.getFutureRequest().getResult() != null) {
						result = localChannelReference.getFutureRequest().getResult();
						error = new ErrorPacket(
							&quot;Error while finalizing transfer: &quot;+result.getMessage(),
							result.code.getCode(), ErrorPacket.FORWARDCLOSECODE);
					} else {
						error = new ErrorPacket(
								&quot;Error while finalizing transfer&quot;,
								ErrorCode.FinalOp.getCode(), ErrorPacket.FORWARDCLOSECODE);
					}
					try {
						ChannelUtils.writeAbstractLocalPacket(localChannelReference, error, true);
					} catch (OpenR66ProtocolPacketException e1) {
					}
					session.setStatus(23);
					ChannelCloseTimer.closeFutureChannel(channel);
					return;
				} catch (OpenR66ProtocolSystemException e) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\commander\Commander.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/commander/Commander.html#366">366</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\commander\Commander.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/commander/Commander.html#498">498</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>					hostAuth = null;
				}
			} catch (WaarpDatabaseNoConnectionException e) {
				try {
					DbModelFactory.dbModel.validConnection(DbConstant.admin.session);
				} catch (WaarpDatabaseNoConnectionException e1) {
				}
				logger.error(&quot;Database No Connection Error: Cannot execute Commander&quot;, e);
				return;
			} catch (WaarpDatabaseSqlException e) {
				try {
					DbModelFactory.dbModel.validConnection(DbConstant.admin.session);
				} catch (WaarpDatabaseNoConnectionException e1) {
				}
				logger.error(&quot;Database SQL Error: Cannot execute Commander&quot;, e);
				return;
			} catch (WaarpDatabaseException e) {
				try {
					DbModelFactory.dbModel.validConnection(DbConstant.admin.session);
				} catch (WaarpDatabaseNoConnectionException e1) {
				}
				logger.error(&quot;Database Error: Cannot execute Commander&quot;, e);
				return;
			} finally {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\data\DbConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbConfiguration.html#421">421</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\data\DbHostConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbHostConfiguration.html#746">746</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>		DbConfiguration dbConfiguration = new DbConfiguration(preparedStatement.getDbSession());
		dbConfiguration.getValues(preparedStatement, dbConfiguration.allFields);
		dbConfiguration.setFromArray();
		dbConfiguration.isSaved = true;
		return dbConfiguration;
	}

	/**
	 * 
	 * @return the DbPreparedStatement for getting Updated Object
	 * @throws WaarpDatabaseNoConnectionException
	 * @throws WaarpDatabaseSqlException
	 */
	public static DbPreparedStatement getUpdatedPrepareStament(DbSession session)
			throws WaarpDatabaseNoConnectionException, WaarpDatabaseSqlException {
		String request = &quot;SELECT &quot; + selectAllFields;
		request += &quot; FROM &quot; + table +
				&quot; WHERE &quot; + Columns.UPDATEDINFO.name() + &quot; = &quot; +
				AbstractDbData.UpdatedInfo.TOSUBMIT.ordinal() +
				&quot; AND &quot; + Columns.HOSTID.name() + &quot; = '&quot; + Configuration.configuration.HOST_ID
				+ &quot;'&quot;;
		DbPreparedStatement prep = new DbPreparedStatement(session, request);
		return prep;
	}
	
	/**
	 * 
	 * @param session
	 * @param hostid
	 * @param limitBandwith 0 for no limit, &gt; 0 for one limit, &lt; 0 for no filter
	 * @return the preparedStatement with the filter
	 * @throws WaarpDatabaseNoConnectionException
	 * @throws WaarpDatabaseSqlException
	 */
	public static DbPreparedStatement getFilterPrepareStament(DbSession session,
			String hostid, long limitBandwith)</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\client\Message.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/Message.html#147">147</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\client\RequestInformation.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/RequestInformation.html#184">184</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>			logger.debug(Messages.getString(&quot;Message.HostNotFound&quot;) + requested); //$NON-NLS-1$
			R66Result result = new R66Result(null, true, ErrorCode.ConnectionImpossible, null);
			this.future.setResult(result);
			this.future.cancel();
			return;
		}
		if (host.isClient()) {
			logger.error(Messages.getString(&quot;Message.HostIsClient&quot;) + requested); //$NON-NLS-1$
			R66Result result = new R66Result(null, true, ErrorCode.ConnectionImpossible, null);
			this.future.setResult(result);
			this.future.cancel();
			return;
		}
		SocketAddress socketAddress = host.getSocketAddress();
		boolean isSSL = host.isSsl();
		LocalChannelReference localChannelReference = null;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\commander\Commander.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/commander/Commander.html#261">261</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\commander\Commander.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/commander/Commander.html#368">368</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\commander\Commander.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/commander/Commander.html#500">500</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			} catch (WaarpDatabaseNoConnectionException e) {
				try {
					DbModelFactory.dbModel.validConnection(DbConstant.admin.session);
				} catch (WaarpDatabaseNoConnectionException e1) {
				}
				logger.error(&quot;Database No Connection Error: Cannot execute Commander&quot;, e);
				return;
			} catch (WaarpDatabaseSqlException e) {
				try {
					DbModelFactory.dbModel.validConnection(DbConstant.admin.session);
				} catch (WaarpDatabaseNoConnectionException e1) {
				}
				logger.error(&quot;Database SQL Error: Cannot execute Commander&quot;, e);
				return;
			} catch (WaarpDatabaseException e) {
				try {
					DbModelFactory.dbModel.validConnection(DbConstant.admin.session);
				} catch (WaarpDatabaseNoConnectionException e1) {
				}
				logger.error(&quot;Database Error: Cannot execute Commander&quot;, e);
				return;
			} finally {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\adminssl\HttpSslHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/adminssl/HttpSslHandler.html#922">922</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\adminssl\HttpSslHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/adminssl/HttpSslHandler.html#997">997</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			if (&quot;Create&quot;.equalsIgnoreCase(parm)) {
				String host = getTrimValue(&quot;host&quot;);
				String addr = getTrimValue(&quot;address&quot;);
				String port = getTrimValue(&quot;port&quot;);
				String key = getTrimValue(&quot;hostkey&quot;);
				boolean ssl, admin, isclient, isactive, isproxified;
				ssl = params.containsKey(&quot;ssl&quot;);
				admin = params.containsKey(&quot;admin&quot;);
				isclient = params.containsKey(&quot;isclient&quot;);
				isactive = params.containsKey(&quot;isactive&quot;);
				isproxified = params.containsKey(&quot;isproxified&quot;);
				if (host == null || addr == null || port == null || key == null) {
					body0 = body1 = body = &quot;&quot;;
					body = Messages.getString(&quot;HttpSslHandler.13&quot;); //$NON-NLS-1$</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\DbConfigurationR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbConfigurationR66RestMethodHandler.html#153">153</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\DbHostAuthR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbHostAuthR66RestMethodHandler.html#160">160</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\DbHostConfigurationR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbHostConfigurationR66RestMethodHandler.html#172">172</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\DbRuleR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbRuleR66RestMethodHandler.html#154">154</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>					JsonHandler.createObjectNode().put(DbConfiguration.Columns.HOSTID.name(), &quot;HostId as VARCHAR in URI as &quot;+this.path+&quot;/id&quot;),
					node1);
			node.add(node2);

			node3 = JsonHandler.createObjectNode();
			for (FILTER_ARGS arg : FILTER_ARGS.values()) {
				node3.put(arg.name(), arg.type);
			}
			node2 = RestArgument.fillDetailedAllow(METHOD.GET, this.path, COMMAND_TYPE.MULTIGET.name(), 
					node3, JsonHandler.createArrayNode().add(node1));
			node.add(node2);
		}
		if (this.methods.contains(METHOD.PUT)) {
			node3 = JsonHandler.createObjectNode();
			node3.put(DbConfiguration.Columns.HOSTID.name(), &quot;HostId as VARCHAR in URI as &quot;+this.path+&quot;/id&quot;);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\HttpRestControlR66Handler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/HttpRestControlR66Handler.html#162">162</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\HttpRestInformationR66Handler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/HttpRestInformationR66Handler.html#119">119</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>					result.setDetail(&quot;New Transfer cannot be registered&quot;);
					setError(handler, result, HttpResponseStatus.NOT_ACCEPTABLE);
				}
			} else {
				logger.info(&quot;Validation is ignored: &quot; + json);
				result.setDetail(&quot;Unknown command&quot;);
				setError(handler, result, json, HttpResponseStatus.PRECONDITION_FAILED);
			}
		} catch (OpenR66ProtocolNotAuthenticatedException e) {
			throw new HttpInvalidAuthenticationException(e);
		} catch (OpenR66ProtocolPacketException e) {
			throw new HttpIncorrectRequestException(e);
		} catch (OpenR66ProtocolNoDataException e) {
			throw new HttpIncorrectRequestException(e);
		}
	}
	
	protected ArrayNode getDetailedAllow() {
		ArrayNode node = JsonHandler.createArrayNode();
		
		if (this.methods.contains(METHOD.GET)) {
			InformationJsonPacket node3 = new InformationJsonPacket(Long.MIN_VALUE, false, &quot;remoteHost&quot;);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\data\DbTaskRunner.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbTaskRunner.html#4031">4031</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\data\DbTaskRunner.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbTaskRunner.html#4244">4244</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		} catch (FileNotFoundException e) {
			logger.error(&quot;Cannot write XML file&quot;, e);
			throw new OpenR66ProtocolBusinessException(&quot;File not found&quot;);
		} catch (UnsupportedEncodingException e) {
			logger.error(&quot;Cannot write XML file&quot;, e);
			throw new OpenR66ProtocolBusinessException(&quot;Unsupported Encoding&quot;);
		} finally {
			if (xmlWriter != null) {
				try {
					xmlWriter.endDocument();
					xmlWriter.flush();
					xmlWriter.close();
				} catch (SAXException e) {
					try {
						outputStream.close();
					} catch (IOException e2) {
					}
					File file = new File(filename);
					file.delete();
					logger.error(&quot;Cannot write XML file&quot;, e);
					throw new OpenR66ProtocolBusinessException(&quot;Unsupported Encoding&quot;);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\server\ChangeBandwidthLimits.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/server/ChangeBandwidthLimits.html#155">155</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\server\LogExport.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/server/LogExport.html#148">148</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		try {
			ChannelUtils.writeAbstractLocalPacket(localChannelReference, valid, false);
		} catch (OpenR66ProtocolPacketException e) {
			logger.error(&quot;Bad Protocol&quot;, e);
			Channels.close(localChannelReference.getLocalChannel());
			localChannelReference = null;
			host = null;
			valid = null;
			future.setResult(new R66Result(e, null, true,
					ErrorCode.TransferError, null));
			future.setFailure(e);
			return;
		}
		host = null;
		future.awaitUninterruptibly();
		logger.info(&quot;Request done with &quot; + (future.isSuccess() ? &quot;success&quot; : &quot;error&quot;));
		Channels.close(localChannelReference.getLocalChannel());
		localChannelReference = null;
	}

	protected static long swriteGlobalLimit = -1;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\HttpRestBandwidthR66Handler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/HttpRestBandwidthR66Handler.html#63">63</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\HttpRestConfigR66Handler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/HttpRestConfigR66Handler.html#67">67</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\HttpRestInformationR66Handler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/HttpRestInformationR66Handler.html#67">67</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\HttpRestLogR66Handler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/HttpRestLogR66Handler.html#67">67</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		setIntersectionMethods(methods, METHOD.GET, METHOD.PUT);
	}
	
	@Override
	public void endParsingRequest(HttpRestHandler handler, RestArgument arguments, RestArgument result, Object body)
			throws HttpIncorrectRequestException, HttpInvalidAuthenticationException {
		logger.debug(&quot;debug: {} ### {}&quot;,arguments,result);
		if (body != null) {
			logger.debug(&quot;Obj: {}&quot;, body);
		}
		handler.setWillClose(false);
		ServerActions serverHandler = ((HttpRestR66Handler) handler).serverHandler;
		// now action according to body
		JsonPacket json = (JsonPacket) body;
		if (json == null) {
			result.setDetail(&quot;not enough information&quot;);
			setError(handler, result, HttpResponseStatus.BAD_REQUEST);
			return;
		}
		result.getAnswer().put(AbstractDbData.JSON_MODEL, RESTHANDLERS.Bandwidth.name());</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\localhandler\ServerActions.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/localhandler/ServerActions.html#462">462</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\localhandler\ServerActions.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/localhandler/ServerActions.html#1154">1154</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			case LocalPacketFactory.CONFIMPORTPACKET: {
				session.newState(VALIDOTHER);
				// Authentication must be the local server or CONFIGADMIN authorization
				try {
					if (!session.getAuth().getUser().equals(
							Configuration.configuration.getHostId(session.getAuth().isSsl())) &amp;&amp;
							!session.getAuth().isValidRole(ROLE.CONFIGADMIN)) {
						throw new OpenR66ProtocolNotAuthenticatedException(
								&quot;Not correctly authenticated&quot;);
					}
				} catch (OpenR66ProtocolNoSslException e1) {
					throw new OpenR66ProtocolNotAuthenticatedException(
							&quot;Not correctly authenticated since SSL is not supported&quot;, e1);
				}
				if (Configuration.configuration.r66Mib != null) {
					Configuration.configuration.r66Mib.notifyWarning(
							&quot;Import Configuration Order received&quot;, session.getAuth().getUser());
				}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#97">97</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#100">100</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#100">100</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#101">101</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#93">93</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>		} catch (WaarpDatabaseException e1) {
			e1.printStackTrace();
		}

		// Configuration
		action = createTableH2 + DbConfiguration.table + &quot;(&quot;;
		DbConfiguration.Columns[] ccolumns = DbConfiguration.Columns
				.values();
		for (int i = 0; i &lt; ccolumns.length - 1; i++) {
			action += ccolumns[i].name() +
					DBType.getType(DbConfiguration.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += ccolumns[ccolumns.length - 1].name() +
				DBType.getType(DbConfiguration.dbTypes[ccolumns.length - 1]) +</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\client\DirectTransfer.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/DirectTransfer.html#181">181</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\client\MultipleDirectTransfer.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/MultipleDirectTransfer.html#200">200</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>					outputFormat.sysout();
				}
				if (nolog || result.runner.shallIgnoreSave()) {
					// In case of success, delete the runner
					try {
						result.runner.delete();
					} catch (WaarpDatabaseException e) {
						logger.warn(&quot;Cannot apply nolog to     &quot; + result.runner.toShortString(),
								e);
					}
				}
			} else {
				if (result == null || result.runner == null) {
					outputFormat.setValue(FIELDS.status.name(), 2);
					outputFormat.setValue(FIELDS.statusTxt.name(), Messages.getString(&quot;Transfer.FailedNoId&quot;)); //$NON-NLS-1$
					outputFormat.setValue(FIELDS.remote.name(), rhost);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\data\DbRule.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbRule.html#599">599</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\data\DbRule.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbRule.html#693">693</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>		getIdsRule(this.ids);
		rpreTasksArray = getTasksRule(this.rpreTasks);
		rpostTasksArray = getTasksRule(this.rpostTasks);
		rerrorTasksArray = getTasksRule(this.rerrorTasks);
		spreTasksArray = getTasksRule(this.spreTasks);
		spostTasksArray = getTasksRule(this.spostTasks);
		serrorTasksArray = getTasksRule(this.serrorTasks);
		// and reverse
		this.rpreTasks = setTasksRule(rpreTasksArray);
		this.rpostTasks = setTasksRule(rpostTasksArray);
		this.rerrorTasks = setTasksRule(rerrorTasksArray);
		this.spreTasks = setTasksRule(spreTasksArray);
		this.spostTasks = setTasksRule(spostTasksArray);
		this.serrorTasks = setTasksRule(serrorTasksArray);
		setToArray();
		isSaved = false;
	}

	/**
	 * @param dbSession
	 * @param idRule
	 * @throws WaarpDatabaseException
	 */
	public DbRule(DbSession dbSession, String idRule) throws WaarpDatabaseException {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#128">128</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#338">338</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#131">131</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#370">370</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#131">131</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#370">370</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#124">124</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#321">321</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>		action = createTableH2 + DbHostConfiguration.table + &quot;(&quot;;
		DbHostConfiguration.Columns[] chcolumns = DbHostConfiguration.Columns
				.values();
		for (int i = 0; i &lt; chcolumns.length - 1; i++) {
			action += chcolumns[i].name() +
					DBType.getType(DbHostConfiguration.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += chcolumns[chcolumns.length - 1].name() +
				DBType.getType(DbHostConfiguration.dbTypes[chcolumns.length - 1]) +
				primaryKey + &quot;)&quot;;
		System.out.println(action);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#224">224</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#227">227</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#227">227</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#232">232</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#220">220</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		action = &quot;CREATE INDEX IF NOT EXISTS IDX_RUNNER ON &quot; + DbTaskRunner.table + &quot;(&quot;;
		DbTaskRunner.Columns[] icolumns = DbTaskRunner.indexes;
		for (int i = 0; i &lt; icolumns.length - 1; i++) {
			action += icolumns[i].name() + &quot;, &quot;;
		}
		action += icolumns[icolumns.length - 1].name() + &quot;)&quot;;
		System.out.println(action);
		try {
			request.query(action);
		} catch (WaarpDatabaseNoConnectionException e) {
			e.printStackTrace();
			return;
		} catch (WaarpDatabaseSqlException e) {
			// XXX FIX no return;
		} finally {
			request.close();
		}

		// cptrunner
		action = &quot;CREATE SEQUENCE IF NOT EXISTS &quot; + DbTaskRunner.fieldseq +</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\localhandler\ServerActions.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/localhandler/ServerActions.html#618">618</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\localhandler\ServerActions.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/localhandler/ServerActions.html#1004">1004</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>				localChannelReference.validateRequest(result);
				try {
					ChannelUtils.writeAbstractLocalPacket(localChannelReference,
							valid, true);
				} catch (OpenR66ProtocolPacketException e) {
				}
				Channels.close(channel);
				break;
			}
			case LocalPacketFactory.TESTPACKET: {
				session.newState(VALIDOTHER);
				logger.info(&quot;Valid TEST MESSAGE: &quot; + packet.toString());
				R66Result resulttest = new R66Result(session, true,
						ErrorCode.CompleteOk, null);
				resulttest.other = packet;
				localChannelReference.validateRequest(resulttest);
				Channels.close(channel);
				break;
			}
			default:
				logger.info(&quot;Validation is ignored: &quot; + packet.getTypeValid());
		}
	}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\gateway\kernel\exec\JavaExecutorWaarpFtp4jClient.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/gateway/kernel/exec/JavaExecutorWaarpFtp4jClient.html#220">220</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\context\task\FtpTransferTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/FtpTransferTask.html#236">236</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			logger.error(ftpClient.getResult());
			return;
		}
		try {
			if (cwd != null &amp;&amp; !ftpClient.changeDir(cwd)) {
				ftpClient.makeDir(cwd);
				if (!ftpClient.changeDir(cwd)) {
					logger.warn(&quot;Cannot change od directory: &quot; + cwd);
				}
			}
			if (preArgs != null) {
				String[] result = ftpClient.executeCommand(preArgs);
				for (String string : result) {
					logger.debug(&quot;PRE: &quot; + string);
				}
			}
			if (!ftpClient.transferFile(filepath, filename, codeCommand)) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\context\task\RescheduleTransferTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/RescheduleTransferTask.html#314">314</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\context\task\RescheduleTransferTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/RescheduleTransferTask.html#361">361</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>				String[] elmts = args[i].split(&quot;;&quot;);
				boolean startModified = false;
				String[] values = elmts[0].split(&quot;:&quot;);
				Calendar start = getCalendar(values);
				if (start != null) {
					startModified = true;
				} else {
					start = Calendar.getInstance();
				}
				boolean stopModified = false;
				values = elmts[1].split(&quot;:&quot;);
				Calendar stop = getCalendar(values);
				if (stop != null) {
					stopModified = true;
				} else {
					stop = Calendar.getInstance();
				}
				logger.debug(&quot;Dates before check: Not between &quot; + start.getTime() + &quot; and &quot;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#64">64</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#67">67</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#67">67</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#65">65</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#60">60</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>		String primaryKey = &quot; PRIMARY KEY &quot;;
		String notNull = &quot; NOT NULL &quot;;

		// Multiple Mode
		String action = createTableH2 + DbMultipleMonitor.table + &quot;(&quot;;
		DbMultipleMonitor.Columns[] mcolumns = DbMultipleMonitor.Columns
				.values();
		for (int i = 0; i &lt; mcolumns.length - 1; i++) {
			action += mcolumns[i].name() +
					DBType.getType(DbMultipleMonitor.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += mcolumns[mcolumns.length - 1].name() +
				DBType.getType(DbMultipleMonitor.dbTypes[mcolumns.length - 1]) +</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#123">123</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#126">126</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#126">126</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#128">128</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#119">119</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		} finally {
			request.close();
		}

		// HostConfiguration
		action = createTableH2 + DbHostConfiguration.table + &quot;(&quot;;
		DbHostConfiguration.Columns[] chcolumns = DbHostConfiguration.Columns
				.values();
		for (int i = 0; i &lt; chcolumns.length - 1; i++) {
			action += chcolumns[i].name() +
					DBType.getType(DbHostConfiguration.dbTypes[i]) + notNull +
					&quot;, &quot;;
		}
		action += chcolumns[chcolumns.length - 1].name() +
				DBType.getType(DbHostConfiguration.dbTypes[chcolumns.length - 1]) +</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#334">334</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#366">366</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#366">366</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#332">332</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#317">317</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>			String primaryKey = &quot; PRIMARY KEY &quot;;
			String notNull = &quot; NOT NULL &quot;;
	
			// HostConfiguration
			String action = createTableH2 + DbHostConfiguration.table + &quot;(&quot;;
			DbHostConfiguration.Columns[] chcolumns = DbHostConfiguration.Columns
					.values();
			for (int i = 0; i &lt; chcolumns.length - 1; i++) {
				action += chcolumns[i].name() +
						DBType.getType(DbHostConfiguration.dbTypes[i]) + notNull +
						&quot;, &quot;;
			}
			action += chcolumns[chcolumns.length - 1].name() +
					DBType.getType(DbHostConfiguration.dbTypes[chcolumns.length - 1]) +</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\protocol\http\rest\handler\DbConfigurationR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbConfigurationR66RestMethodHandler.html#100">100</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\protocol\http\rest\handler\DbHostAuthR66RestMethodHandler.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/protocol/http/rest/handler/DbHostAuthR66RestMethodHandler.html#103">103</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>			return new DbConfiguration(handler.getDbSession(), arg);
		} catch (WaarpDatabaseException e) {
			throw new HttpIncorrectRequestException(&quot;Issue while inserting into database&quot;, e);
		}
	}

	@Override
	protected DbPreparedStatement getPreparedStatement(HttpRestHandler handler,
			RestArgument arguments, RestArgument result, Object body)
			throws HttpIncorrectRequestException, HttpInvalidAuthenticationException {
		ObjectNode arg = arguments.getUriArgs().deepCopy();
		arg.putAll(arguments.getBody());
		String host = arg.path(FILTER_ARGS.HOSTID.name()).asText();
		if (host == null || host.isEmpty()) {
			host = null;
		}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\client\Message.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/Message.html#80">80</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\client\RequestInformation.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/client/RequestInformation.html#87">87</a></td></tr>
<tr class="b"><td colspan='3'>
<div>
<pre>		 _INFO_ARGS = Messages.getString(&quot;Message.0&quot;)+ Messages.getString(&quot;Message.OutputFormat&quot;); //$NON-NLS-1$
		if (args.length &lt; 5) {
			logger
					.error(_INFO_ARGS);
			return false;
		}
		if (!FileBasedConfiguration
				.setClientConfigurationFromXml(Configuration.configuration, args[0])) {
			logger
					.error(Messages.getString(&quot;Configuration.NeedCorrectConfig&quot;)); //$NON-NLS-1$
			return false;
		}
		for (int i = 1; i &lt; args.length; i++) {
			if (args[i].equalsIgnoreCase(&quot;-to&quot;)) {
				i++;
				srequested = args[i];
			} else if (args[i].equalsIgnoreCase(&quot;-msg&quot;)) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelH2.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelH2.html#171">171</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelMariadb.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMariadb.html#174">174</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelMysql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelMysql.html#174">174</a></td></tr>
<tr class="a">
<td>org\waarp\openr66\database\model\DbModelOracle.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelOracle.html#179">179</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\model\DbModelPostgresql.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/model/DbModelPostgresql.html#167">167</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		} finally {
			request.close();
		}

		// rules
		action = createTableH2 + DbRule.table + &quot;(&quot;;
		DbRule.Columns[] rcolumns = DbRule.Columns.values();
		for (int i = 0; i &lt; rcolumns.length - 1; i++) {
			action += rcolumns[i].name() +
					DBType.getType(DbRule.dbTypes[i]) + &quot;, &quot;;
		}
		action += rcolumns[rcolumns.length - 1].name() +
				DBType.getType(DbRule.dbTypes[rcolumns.length - 1]) +</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\context\R66Session.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/R66Session.html#190">190</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\context\R66Session.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/R66Session.html#231">231</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	public void clear() {
		// First check if a transfer was on going
		if (runner != null &amp;&amp; (!runner.isFinished()) &amp;&amp; (!runner.continueTransfer())) {
			if (localChannelReference != null) {
				if (!localChannelReference.getFutureRequest().isDone()) {
					R66Result result = new R66Result(new OpenR66RunnerErrorException(
							&quot;Close before ending&quot;), this, true,
							ErrorCode.Disconnection, runner);// True since called from closed
					result.runner = runner;
					try {
						setFinalizeTransfer(false, result);
					} catch (OpenR66RunnerErrorException e) {
					} catch (OpenR66ProtocolSystemException e) {
					}
				}
			}
		}
		if (dir != null) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\data\DbConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbConfiguration.html#476">476</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\data\DbHostConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbHostConfiguration.html#818">818</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			}
		}
		if (condition != null) {
			preparedStatement.createPrepareStatement(request + condition +
					&quot; ORDER BY &quot; + Columns.HOSTID.name());
		} else {
			preparedStatement.createPrepareStatement(request + 
					&quot; ORDER BY &quot; + Columns.HOSTID.name());
		}
		return preparedStatement;
	}


	/*
	 * (non-Javadoc)
	 * @see org.waarp.openr66.databaseold.data.AbstractDbData#changeUpdatedInfo(UpdatedInfo)
	 */
	@Override
	public void changeUpdatedInfo(UpdatedInfo info) {
		if (updatedInfo != info.ordinal()) {
			updatedInfo = info.ordinal();
			allFields[Columns.UPDATEDINFO.ordinal()].setValue(updatedInfo);
			isSaved = false;
		}
	}

	/**
	 * Update configuration according to new value of limits
	 */
	public void updateConfiguration() {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\data\DbTaskRunner.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbTaskRunner.html#1032">1032</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\data\DbTaskRunner.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbTaskRunner.html#1074">1074</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>	public void insert() throws WaarpDatabaseException {
		if (isSaved) {
			return;
		}
		boolean shallIgnore = shallIgnoreSave();
		if (dbSession == null || shallIgnore) {
			if (specialId == DbConstant.ILLEGALVALUE) {
				// New SpecialId is not possible with No Database Model
				createNoDbSpecialId();
			}
			isSaved = true;
			if (Configuration.configuration.saveTaskRunnerWithNoDb) {
				try {
					setToArray();
					this.writeXmlWorkNoDb();
				} catch (OpenR66ProtocolBusinessException e) {
					// Ignore
				}
			}
			if (this.updatedInfo == UpdatedInfo.TOSUBMIT.ordinal()) {
				addNoDb();
			}
			if (shallIgnore) {
				dbR66TaskHashMap.put(specialId, this);
			}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#2311">2311</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\configuration\FileBasedConfiguration.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/configuration/FileBasedConfiguration.html#2374">2374</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		}
		config.HOST_AUTH = R66Auth.getServerAuth(
				DbConstant.admin.session, config.HOST_ID);
		if (config.HOST_AUTH == null) {
			logger.error(&quot;Cannot find Authentication for current host&quot;);
			return false;
		}
		if (config.HOST_SSLID != null) {
			config.HOST_SSLAUTH = R66Auth.getServerAuth(
					DbConstant.admin.session,
					config.HOST_SSLID);
			if (config.HOST_SSLAUTH == null) {
				logger.error(&quot;Cannot find SSL Authentication for current host&quot;);
				return false;
			}
		}
		loadBusinessWhiteList(config);
		hashConfig.clear();
		hashConfig = null;
		configuration = null;
		return true;
	}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\database\data\DbRule.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbRule.html#797">797</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\database\data\DbRule.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/database/data/DbRule.html#818">818</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>			setFromArrayClone(rule);
			if (recvPath == null || recvPath.trim().isEmpty()) {
				recvPath = Configuration.configuration.inPath;
			}
			if (sendPath == null || sendPath.trim().isEmpty()) {
				sendPath = Configuration.configuration.outPath;
			}
			if (archivePath == null || archivePath.trim().isEmpty()) {
				archivePath = Configuration.configuration.archivePath;
			}
			if (workPath == null || workPath.trim().isEmpty()) {
				workPath = Configuration.configuration.workingPath;
			}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Project</th>
<th>Line</th></tr>
<tr class="a">
<td>org\waarp\openr66\context\task\ExecMoveTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/ExecMoveTask.html#145">145</a></td></tr>
<tr class="b">
<td>org\waarp\openr66\context\task\ExecOutputTask.java</td>
<td>Waarp OpenR66</td>
<td><a href="./xref/org/waarp/openr66/context/task/ExecOutputTask.html#150">150</a></td></tr>
<tr class="a"><td colspan='3'>
<div>
<pre>		Thread thread = new Thread(lastLineReader, &quot;ExecRename&quot;
				+ session.getRunner().getSpecialId());
		thread.setDaemon(true);
		Configuration.configuration.getExecutorService().execute(thread);
		int status = -1;
		try {
			status = defaultExecutor.execute(commandLine);
		} catch (ExecuteException e) {
			if (e.getExitValue() == -559038737) {
				// Cannot run immediately so retry once
				try {
					Thread.sleep(Configuration.RETRYINMS);
				} catch (InterruptedException e1) {
				}
				try {
					status = defaultExecutor.execute(commandLine);
				} catch (ExecuteException e1) {</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2009-2014
                        <a href="http://www.waarp.it">Waarp</a>.
            All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
